<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PCKYKBDRNM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-PCKYKBDRNM');
    </script>

    <!-- SEO Meta Tags -->
    <title>Claude Code Open - Open Source AI Coding Assistant CLI</title>
    <meta name="description"
        content="Claude Code Open is an educational open-source project re-implementing Claude Code CLI via reverse engineering. Features 25+ tools, full session management, and MCP support.">
    <meta name="keywords"
        content="Claude Code, AI Coding Assistant, CLI Tool, Open Source, TypeScript, Anthropic, Reverse Engineering, Learning Project">
    <meta name="author" content="Claude Code Open Community">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.chatbi.site/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.chatbi.site/">
    <meta property="og:title" content="Claude Code Open - Open Source AI Coding Assistant CLI">
    <meta property="og:description"
        content="Learn Claude Code architecture via reverse engineering. 25+ built-in tools, session management, and MCP support.">
    <meta property="og:image" content="https://www.chatbi.site/og-image.png">
    <meta property="og:locale" content="en_US">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://www.chatbi.site/">
    <meta name="twitter:title" content="Claude Code Open - Open Source AI Coding Assistant CLI">
    <meta name="twitter:description"
        content="Learn Claude Code architecture via reverse engineering. 25+ built-in tools, session management, and MCP support.">
    <meta name="twitter:image" content="https://www.chatbi.site/og-image.png">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Claude Code Open",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Windows, macOS, Linux",
        "description": "Educational open-source project re-implementing Claude Code CLI via reverse engineering",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "Claude Code Open Community"
        }
    }
    </script>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a href="#" class="logo">
                <span class="logo-icon">‚ö°</span>
                <span class="logo-text">Claude Code Open</span>
            </a>
            <div class="nav-links">
                <a href="#features">Features</a>
                <a href="#architecture">Architecture</a>
                <a href="#blog">Blog</a>
                <a href="#quickstart">Quick Start</a>
                <a href="/zh" class="lang-switch">‰∏≠Êñá</a>
                <a href="https://github.com/kill136/claude-code-open" class="btn btn-outline" target="_blank" rel="noopener">
                    <svg class="github-icon" viewBox="0 0 24 24" width="20" height="20">
                        <path fill="currentColor"
                            d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                    </svg>
                    GitHub
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-badge">Open Source Learning Project</div>
                <h1 class="hero-title">
                    Deeply Understand Claude Code via<br>
                    <span class="gradient-text">Reverse Engineering</span>
                </h1>
                <p class="hero-description">
                    A complete re-implementation of Claude Code CLI v2.1.4 core functionalities based on public APIs and
                    type definitions. With 25+ built-in tools, session management, and MCP support, it's the perfect
                    resource for learning AI coding assistant architecture.
                </p>
                <div class="hero-buttons">
                    <a href="#quickstart" class="btn btn-primary">
                        Get Started
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7" />
                        </svg>
                    </a>
                    <a href="https://github.com/kill136/claude-code-open" class="btn btn-secondary" target="_blank"
                        rel="noopener">
                        View Source
                    </a>
                </div>
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-value">25+</span>
                        <span class="stat-label">Built-in Tools</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">TypeScript</span>
                        <span class="stat-label">Tech Stack</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">MIT</span>
                        <span class="stat-label">License</span>
                    </div>
                </div>
            </div>
            <div class="hero-visual">
                <div class="terminal">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <span class="dot red"></span>
                            <span class="dot yellow"></span>
                            <span class="dot green"></span>
                        </div>
                        <span class="terminal-title">claude-code-open</span>
                    </div>
                    <div class="terminal-body">
                        <pre><code><span class="prompt">$</span> npm run dev

<span class="info">Claude Code Open v2.1.4</span>
<span class="success">‚úì</span> Loaded 25 tools
<span class="success">‚úì</span> Session management started
<span class="success">‚úì</span> MCP server connected

<span class="prompt">></span> <span class="cursor">Analyze the architecture of this codebase</span></code></pre>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Features Section -->
    <section id="features" class="features">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Core Features</h2>
                <p class="section-subtitle">Fully replicating Claude Code's core capabilities to understand the design
                    philosophy of each module</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üõ†Ô∏è</div>
                    <h3>25+ Built-in Tools</h3>
                    <p>Complete toolset including Bash, Read, Write, Edit, Glob, Grep, WebFetch, WebSearch, Task, etc.
                    </p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üíæ</div>
                    <h3>Session Management</h3>
                    <p>Full session persistence with 30-day auto-expiration and history restoration support</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîå</div>
                    <h3>MCP Protocol Support</h3>
                    <p>Complete Model Context Protocol implementation for extensible external tool services</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üé®</div>
                    <h3>React + Ink UI</h3>
                    <p>Modern terminal UI framework for fluid interactive experiences</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h3>Intelligent Code Analysis</h3>
                    <p>Tree-sitter WASM multi-language parsing for precise code understanding</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3>Streaming Response</h3>
                    <p>Real-time streaming output for vastly improved interaction speed</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Architecture Section -->
    <section id="architecture" class="architecture">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Three-Tier Architecture</h2>
                <p class="section-subtitle">Clear layered design for easy understanding and extension</p>
            </div>
            <div class="architecture-diagram">
                <div class="arch-layer">
                    <div class="arch-layer-header">
                        <span class="layer-number">1</span>
                        <h3>Entry Layer</h3>
                    </div>
                    <div class="arch-layer-content">
                        <code>src/cli.ts</code> - CLI arg parsing<br>
                        <code>src/index.ts</code> - Main export
                    </div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer">
                    <div class="arch-layer-header">
                        <span class="layer-number">2</span>
                        <h3>Core Engine</h3>
                    </div>
                    <div class="arch-layer-content">
                        <code>client.ts</code> - API wrapper & retry<br>
                        <code>session.ts</code> - Session state mgmt<br>
                        <code>loop.ts</code> - Dialogue loop orchestration
                    </div>
                </div>
                <div class="arch-arrow">‚Üì</div>
                <div class="arch-layer">
                    <div class="arch-layer-header">
                        <span class="layer-number">3</span>
                        <h3>Tool System</h3>
                    </div>
                    <div class="arch-layer-content">
                        <code>BaseTool</code> - Tool base class<br>
                        <code>ToolRegistry</code> - Dynamic tool mgmt<br>
                        25+ Built-in tool implementations
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Blog Section -->
    <section id="blog" class="blog">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Technical Blog</h2>
                <p class="section-subtitle">Deep dives into reverse engineering Claude Code</p>
            </div>
            <div class="blog-posts">
                <article class="blog-post featured">
                    <div class="blog-post-header">
                        <span class="blog-tag">Deep Dive</span>
                        <span class="blog-date">February 2026</span>
                    </div>
                    <h3>Cracking the Claude Code OAuth Proxy Mystery: How We Fixed the "Credential Only Authorized for Claude Code" Error</h3>
                    <div class="blog-content">
                        <h4>The Problem</h4>
                        <p>When building a transparent proxy to share Claude subscriptions across devices, we encountered a frustrating 400 error:</p>
                        <div class="code-block" style="margin: 1rem 0;">
                            <code>"This credential is only authorized for use with Claude Code and cannot be used for other API requests."</code>
                        </div>
                        <p>The proxy worked perfectly for simple requests via Postman, but failed when forwarding actual Claude Code CLI requests. What was different?</p>

                        <h4>The Investigation</h4>
                        <p>After hours of packet analysis and code diving into the minified <code>cli.js</code>, we discovered the root cause: <strong>the proxy was corrupting the system prompt block structure</strong>.</p>

                        <p>Official Claude Code sends system prompts as an array of text blocks with a specific structure:</p>
                        <div class="code-block" style="margin: 1rem 0;">
                            <code>Block 0: "x-anthropic-billing-header: cc_version=2.1.31.593; cc_entrypoint=cli;"<br>
Block 1: "You are Claude Code, Anthropic's official CLI for Claude..."<br>
Block 2: "...rest of system prompt..."</code>
                        </div>

                        <p>The <code>x-anthropic-billing-header</code> is a special marker block that Anthropic uses to validate Claude Code client identity. Our proxy's identity injection logic found the first text block (the billing header) and prepended the Claude Code identity to it:</p>
                        <div class="code-block" style="margin: 1rem 0; background: #2d1b1b;">
                            <code style="color: #ff6b6b;">// BUG: This corrupted the billing header block!<br>
block.text = CLAUDE_CODE_IDENTITY + '\n\n' + block.text;</code>
                        </div>
                        <p>Result: The billing header was no longer at the start of any block, so the API couldn't find it and rejected the request.</p>

                        <h4>The Fix</h4>
                        <p>We updated the identity injection logic to:</p>
                        <ol>
                            <li><strong>Skip billing header blocks</strong> - Never modify blocks starting with <code>x-anthropic-billing-header</code></li>
                            <li><strong>Insert identity as a separate block</strong> - If no identity exists, insert it AFTER the billing header, maintaining the official structure</li>
                            <li><strong>Remove prompt-caching-scope beta</strong> - The v4 forward path was missing this critical beta header filtering</li>
                        </ol>

                        <div class="code-block" style="margin: 1rem 0; background: #1b2d1b;">
                            <code style="color: #6bff6b;">// FIX: Skip billing blocks, insert identity after them<br>
const isBillingBlock = (b) => b.text?.startsWith('x-anthropic-billing-header');<br>
const insertIdx = system.findIndex(isBillingBlock) + 1;<br>
system.splice(insertIdx, 0, { type: 'text', text: IDENTITY });</code>
                        </div>

                        <h4>Key Takeaways</h4>
                        <ul>
                            <li><strong>Block structure matters</strong> - Claude Code's system prompt isn't just text; it's a structured array where each block has semantic meaning</li>
                            <li><strong>Billing headers are sacred</strong> - The <code>x-anthropic-billing-header</code> block is used for client validation and must remain untouched</li>
                            <li><strong>Beta headers need careful handling</strong> - <code>prompt-caching-scope</code> changes caching behavior and must be removed when proxying OAuth requests</li>
                        </ul>

                        <p style="margin-top: 1.5rem; padding: 1rem; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1)); border-radius: 8px;">
                            <strong>Result:</strong> The proxy now correctly forwards OAuth subscription requests, allowing you to share your Claude subscription across multiple devices seamlessly.
                        </p>
                    </div>
                    <div class="blog-footer">
                        <a href="https://github.com/kill136/claude-code-open/blob/main/src/proxy/server.ts#L598-L632" target="_blank" class="btn btn-outline btn-small">
                            View Source Code Changes ‚Üí
                        </a>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <!-- Quick Start Section -->
    <section id="quickstart" class="quickstart">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Quick Start</h2>
                <p class="section-subtitle">Get your local dev environment running in just a few steps</p>
            </div>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Clone Repository</h3>
                        <div class="code-block">
                            <code>git clone https://github.com/kill136/claude-code-open.git</code>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Install Dependencies</h3>
                        <div class="code-block">
                            <code>cd claude-code && npm install</code>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Configure API Key</h3>
                        <div class="code-block">
                            <code>export ANTHROPIC_API_KEY=your-api-key</code>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>Start Dev Mode</h3>
                        <div class="code-block">
                            <code>npm run dev</code>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
        <div class="container">
            <div class="cta-content">
                <h2>Ready to Dive Deeper?</h2>
                <p>Join the community and explore the core architecture of AI coding assistants together</p>
                <div class="cta-buttons">
                    <a href="https://github.com/kill136/claude-code-open" class="btn btn-primary btn-large" target="_blank"
                        rel="noopener">
                        <svg class="github-icon" viewBox="0 0 24 24" width="24" height="24">
                            <path fill="currentColor"
                                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                        </svg>
                        Star on GitHub
                    </a>
                </div>
            </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <span class="logo">
                        <span class="logo-icon">‚ö°</span>
                        <span class="logo-text">Claude Code Open</span>
                    </span>
                    <p>Educational open source project for learning Claude Code architecture design</p>
                </div>
                <div class="footer-links">
                    <a href="https://github.com/kill136/claude-code-open" target="_blank" rel="noopener">GitHub</a>
                    <a href="https://github.com/kill136/claude-code-open/issues" target="_blank" rel="noopener">Feedback</a>
                    <a href="https://github.com/kill136/claude-code-open/blob/main/LICENSE" target="_blank"
                        rel="noopener">MIT License</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>¬© 2024 Claude Code Open. This is NOT an official Anthropic project.</p>
            </div>
        </div>
    </footer>

    <script>
        function copyCode(btn) {
            const code = btn.previousElementSibling.textContent;
            navigator.clipboard.writeText(code).then(() => {
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = originalText, 2000);
            });
        }

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
    </script>
</body>

</html>