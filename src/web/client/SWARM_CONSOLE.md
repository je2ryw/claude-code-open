# èœ‚ç¾¤æŽ§åˆ¶å° (Swarm Console)

## æ¦‚è¿°

èœ‚ç¾¤æŽ§åˆ¶å°æ˜¯ Claude Code WebUI çš„æ–°å¢žåŠŸèƒ½æ¨¡å—ï¼Œæä¾›å¯è§†åŒ–çš„èœ‚ç¾¤ä»»åŠ¡ç®¡ç†ç•Œé¢ã€‚

## å·²å®Œæˆçš„å·¥ä½œ (Worker-1)

### 1. é¡µé¢æ¡†æž¶å’Œè·¯ç”±

#### åˆ›å»ºçš„æ–‡ä»¶

```
src/web/client/src/
â”œâ”€â”€ Root.tsx                                      # æ ¹ç»„ä»¶ï¼Œå¤„ç†é¡¶å±‚è·¯ç”±
â”œâ”€â”€ pages/SwarmConsole/
â”‚   â”œâ”€â”€ index.tsx                                 # èœ‚ç¾¤æŽ§åˆ¶å°ä¸»é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ SwarmConsole.module.css                   # é¡µé¢æ ·å¼ï¼ˆCSS Modulesï¼‰
â”œâ”€â”€ components/swarm/TopNavBar/
â”‚   â”œâ”€â”€ index.tsx                                 # é¡¶éƒ¨å¯¼èˆªæ ç»„ä»¶
â”‚   â””â”€â”€ TopNavBar.module.css                      # å¯¼èˆªæ æ ·å¼ï¼ˆCSS Modulesï¼‰
â””â”€â”€ types/
    â””â”€â”€ css-modules.d.ts                          # CSS Modules TypeScript ç±»åž‹å£°æ˜Ž
```

#### ä¿®æ”¹çš„æ–‡ä»¶

- `src/web/client/src/main.tsx` - æ›´æ–°å…¥å£æ–‡ä»¶ï¼Œä½¿ç”¨ Root ç»„ä»¶
- `src/web/client/src/App.tsx` - æ·»åŠ å®¹å™¨ div ä»¥é€‚é…æ–°å¸ƒå±€
- `src/web/client/src/styles/index.css` - ç§»é™¤ #root çš„å›ºå®š flex å¸ƒå±€

### 2. é¡µé¢å¸ƒå±€

èœ‚ç¾¤æŽ§åˆ¶å°é‡‡ç”¨ä»¥ä¸‹å¸ƒå±€ç»“æž„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ðŸ’¬ èŠå¤©]  [ðŸ èœ‚ç¾¤]  [ðŸ“‹ è“å›¾]          Claude Code     [âš™ï¸]          â”‚  â† 48px
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ“‹ è“å›¾åˆ—è¡¨    â”‚    ðŸŒ³ ä»»åŠ¡æ ‘åŒºåŸŸ           â”‚   ðŸ‘· Workers (0/8)      â”‚ â”‚
â”‚ â”‚               â”‚                           â”‚                         â”‚ â”‚
â”‚ â”‚ 200px         â”‚      flex: 1              â”‚      320px              â”‚ â”‚
â”‚ â”‚               â”‚                           â”‚                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   â±ï¸ æ—¶é—´çº¿ (å¯æŠ˜å , 150px) â–¼                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å¸ƒå±€ç‰¹ç‚¹

- **é¡¶éƒ¨å¯¼èˆªæ ** (48px)ï¼šå…¨å±€å¯¼èˆªï¼Œæ”¯æŒä¸‰ä¸ªé¡µé¢åˆ‡æ¢
  - ðŸ’¬ èŠå¤©ï¼šåŽŸæœ‰çš„èŠå¤©ç•Œé¢
  - ðŸ èœ‚ç¾¤ï¼šæ–°å¢žçš„èœ‚ç¾¤æŽ§åˆ¶å°
  - ðŸ“‹ è“å›¾ï¼šè“å›¾ç®¡ç†ï¼ˆå ä½ï¼‰

- **ä¸‰æ ä¸»åŒºåŸŸ**ï¼š
  - å·¦ä¾§æ  (200px)ï¼šè“å›¾åˆ—è¡¨åŒºåŸŸ
  - ä¸­å¤®åŒº (flex:1)ï¼šä»»åŠ¡æ ‘æ˜¾ç¤ºåŒºåŸŸ
  - å³ä¾§æ  (320px)ï¼šWorker çŠ¶æ€é¢æ¿

- **åº•éƒ¨æ—¶é—´çº¿** (150px)ï¼š
  - å¯æŠ˜å /å±•å¼€
  - æ˜¾ç¤ºèœ‚ç¾¤è¿è¡Œæ—¶çš„äº‹ä»¶è®°å½•

### 3. æŠ€æœ¯å®žçŽ°

- **React 18 + TypeScript**ï¼šå®Œæ•´çš„ç±»åž‹å®‰å…¨
- **CSS Modules**ï¼šæ¨¡å—åŒ–æ ·å¼ç®¡ç†ï¼Œé¿å…å…¨å±€æ±¡æŸ“
- **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒç§»åŠ¨ç«¯è‡ªé€‚åº”
- **å·²æœ‰åŸºç¡€è®¾æ–½é›†æˆ**ï¼š
  - ä½¿ç”¨çŽ°æœ‰çš„ CSS å˜é‡å’Œä¸»é¢˜ç³»ç»Ÿ
  - å…¼å®¹çŽ°æœ‰çš„ WebSocket é€šä¿¡æœºåˆ¶
  - å¤ç”¨å·²å®šä¹‰çš„ç±»åž‹ç³»ç»Ÿ (types.ts)

### 4. è·¯ç”±ç³»ç»Ÿ

é‡‡ç”¨ç®€å•çš„åŸºäºŽçŠ¶æ€çš„è·¯ç”±ç³»ç»Ÿï¼š

```typescript
type Page = 'chat' | 'swarm' | 'blueprint';
```

- **chat**: æ˜¾ç¤ºåŽŸæœ‰çš„èŠå¤©ç•Œé¢
- **swarm**: æ˜¾ç¤ºèœ‚ç¾¤æŽ§åˆ¶å°
- **blueprint**: è“å›¾ç®¡ç†ï¼ˆå¾…å¼€å‘ï¼‰

### 5. å¼€å‘çŠ¶æ€

âœ… å·²å®Œæˆï¼š
- [x] é¡µé¢æ¡†æž¶å’ŒåŸºç¡€å¸ƒå±€
- [x] é¡¶éƒ¨å¯¼èˆªæ 
- [x] è·¯ç”±é…ç½®
- [x] ä¸‰æ å¸ƒå±€ç»“æž„
- [x] å¯æŠ˜å æ—¶é—´çº¿é¢æ¿
- [x] å“åº”å¼è®¾è®¡
- [x] CSS Modules é…ç½®
- [x] TypeScript ç±»åž‹æ”¯æŒ

ðŸš§ å¾…å®Œæˆï¼ˆéœ€è¦å…¶ä»– Workersï¼‰ï¼š
- [ ] è“å›¾åˆ—è¡¨ç»„ä»¶å’Œæ•°æ®ç»‘å®š
- [ ] ä»»åŠ¡æ ‘ç»„ä»¶å’Œå¯è§†åŒ–
- [ ] Worker é¢æ¿å’ŒçŠ¶æ€ç›‘æŽ§
- [ ] æ—¶é—´çº¿äº‹ä»¶å±•ç¤º
- [ ] WebSocket å®žæ—¶é€šä¿¡é›†æˆ
- [ ] äº¤äº’åŠŸèƒ½ï¼ˆæš‚åœ/æ¢å¤/åœæ­¢ç­‰ï¼‰

## å¦‚ä½•ä½¿ç”¨

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
cd src/web/client
npm run dev
```

### è®¿é—®é¡µé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3457`ï¼Œç‚¹å‡»é¡¶éƒ¨çš„ "ðŸ èœ‚ç¾¤" æ ‡ç­¾å³å¯æŸ¥çœ‹èœ‚ç¾¤æŽ§åˆ¶å°ã€‚

## çŽ°æœ‰åŸºç¡€è®¾æ–½

é¡¹ç›®å·²ç»åŒ…å«ä»¥ä¸‹åŸºç¡€è®¾æ–½ï¼ˆå¯ç›´æŽ¥ä½¿ç”¨ï¼‰ï¼š

- `pages/SwarmConsole/types.ts` - å®Œæ•´çš„ç±»åž‹å®šä¹‰
- `pages/SwarmConsole/hooks/` - WebSocket å’ŒçŠ¶æ€ç®¡ç† hooks
  - `useSwarmWebSocket.ts` - WebSocket é€šä¿¡
  - `useSwarmState.ts` - çŠ¶æ€ç®¡ç†

## ä¸‹ä¸€æ­¥å·¥ä½œå»ºè®®

1. **Worker-2**: å®žçŽ°å·¦ä¾§è“å›¾åˆ—è¡¨ç»„ä»¶
2. **Worker-3**: å®žçŽ°ä¸­å¤®ä»»åŠ¡æ ‘å¯è§†åŒ–
3. **Worker-4**: å®žçŽ°å³ä¾§ Worker é¢æ¿
4. **Worker-5**: å®žçŽ°åº•éƒ¨æ—¶é—´çº¿ç»„ä»¶
5. **Worker-6**: é›†æˆ WebSocket å®žæ—¶é€šä¿¡
6. **Worker-7**: å®žçŽ°äº¤äº’åŠŸèƒ½å’Œä¸šåŠ¡é€»è¾‘

## æŠ€æœ¯ç»†èŠ‚

### CSS å˜é‡ï¼ˆæ¥è‡ªå…¨å±€æ ·å¼ï¼‰

```css
--bg-primary: #1a1b26;        /* ä¸»èƒŒæ™¯è‰² */
--bg-secondary: #24283b;      /* æ¬¡è¦èƒŒæ™¯è‰² */
--bg-tertiary: #414868;       /* ç¬¬ä¸‰èƒŒæ™¯è‰² */
--text-primary: #c0caf5;      /* ä¸»æ–‡æœ¬è‰² */
--text-secondary: #a9b1d6;    /* æ¬¡è¦æ–‡æœ¬è‰² */
--text-muted: #565f89;        /* é™éŸ³æ–‡æœ¬è‰² */
--accent-primary: #7aa2f7;    /* ä¸»å¼ºè°ƒè‰² */
--accent-success: #9ece6a;    /* æˆåŠŸè‰² */
--accent-warning: #e0af68;    /* è­¦å‘Šè‰² */
--accent-error: #f7768e;      /* é”™è¯¯è‰² */
--border-color: #414868;      /* è¾¹æ¡†è‰² */
--code-bg: #1f2335;          /* ä»£ç èƒŒæ™¯è‰² */
```

### å“åº”å¼æ–­ç‚¹

- Desktop: > 1200px
- Tablet: 768px - 1200px
- Mobile: < 768px

## æ³¨æ„äº‹é¡¹

1. é¡¹ç›®ä½¿ç”¨ Viteï¼ŒCSS Modules å¼€ç®±å³ç”¨
2. TypeScript ä¸¥æ ¼æ¨¡å¼å·²å¯ç”¨
3. çŽ°æœ‰ä»£ç ä¸­æœ‰ä¸€äº›ç±»åž‹é”™è¯¯ï¼ˆMcpPanelã€PluginsPanelï¼‰ï¼Œä½†ä¸å½±å“æ–°åŠŸèƒ½
4. æ‰€æœ‰æ–°ç»„ä»¶éƒ½ä½¿ç”¨ CSS Modules ä»¥ä¿æŒæ ·å¼éš”ç¦»

## éªŒè¯

å¼€å‘æœåŠ¡å™¨å·²æˆåŠŸå¯åŠ¨ï¼Œç¡®è®¤æ‰€æœ‰æ–°æ–‡ä»¶éƒ½å·²æ­£ç¡®åˆ›å»ºå’Œé…ç½®ã€‚
