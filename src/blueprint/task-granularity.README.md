# ä»»åŠ¡ç²’åº¦è‡ªåŠ¨æ§åˆ¶æœºåˆ¶

## æ¦‚è¿°

ä»»åŠ¡ç²’åº¦æ§åˆ¶å™¨ (`TaskGranularityController`) è§£å†³äº†ä»»åŠ¡åˆ†è§£è¿‡ç»†æˆ–è¿‡ç²—çš„é—®é¢˜ï¼Œé€šè¿‡è‡ªåŠ¨è¯„ä¼°ä»»åŠ¡å¤æ‚åº¦å¹¶æä¾›æ‹†åˆ†/åˆå¹¶å»ºè®®ï¼Œç¡®ä¿ä»»åŠ¡ç²’åº¦é€‚ä¸­ã€‚

### æ ¸å¿ƒé—®é¢˜

åœ¨ä¹‹å‰çš„å®éªŒä¸­å‘ç°ï¼š
- **è¿‡ç»†é—®é¢˜**ï¼š8 ä¸ªæ¨¡å—è¢«åˆ†è§£æˆ 219 ä¸ªä»»åŠ¡ï¼ˆå¹³å‡æ¯ä¸ªæ¨¡å— 27+ ä»»åŠ¡ï¼‰
- **è¿‡ç²—é—®é¢˜**ï¼šæŸäº›ä»»åŠ¡åŒ…å«è¿‡å¤šåŠŸèƒ½ï¼Œå¯¼è‡´æ— æ³•æœ‰æ•ˆå¹¶è¡Œå’Œ TDD

### è§£å†³æ–¹æ¡ˆ

æä¾›æ™ºèƒ½çš„ç²’åº¦æ§åˆ¶æœºåˆ¶ï¼š
1. **å¤æ‚åº¦è¯„ä¼°**ï¼šå¤šç»´åº¦è¯„ä¼°ä»»åŠ¡å¤æ‚åº¦ï¼ˆä»£ç é‡ã€ä¾èµ–ã€æ¥å£ã€æµ‹è¯•ç­‰ï¼‰
2. **è‡ªåŠ¨æ£€æµ‹**ï¼šè¯†åˆ«è¿‡ç»†æˆ–è¿‡ç²—çš„ä»»åŠ¡
3. **æ™ºèƒ½å»ºè®®**ï¼šæä¾›å…·ä½“çš„æ‹†åˆ†/åˆå¹¶ç­–ç•¥
4. **å¯é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰ç²’åº¦é˜ˆå€¼

## æ ¸å¿ƒæ¦‚å¿µ

### 1. ç²’åº¦é…ç½® (GranularityConfig)

```typescript
interface GranularityConfig {
  // å¤æ‚åº¦é˜ˆå€¼ï¼ˆ0-100 åˆ†åˆ¶ï¼‰
  minTaskComplexity: number;    // é»˜è®¤ 15ï¼Œä½äºæ­¤å€¼éœ€è¦åˆå¹¶
  maxTaskComplexity: number;    // é»˜è®¤ 75ï¼Œé«˜äºæ­¤å€¼éœ€è¦æ‹†åˆ†

  // æ—¶é—´ä¼°ç®—ï¼ˆåˆ†é’Ÿï¼‰
  idealTaskDuration: number;    // é»˜è®¤ 30ï¼Œç†æƒ³æ‰§è¡Œæ—¶é—´
  minTaskDuration: number;      // é»˜è®¤ 10ï¼Œæœ€å°æ‰§è¡Œæ—¶é—´
  maxTaskDuration: number;      // é»˜è®¤ 120ï¼Œæœ€å¤§æ‰§è¡Œæ—¶é—´

  // æ ‘ç»“æ„çº¦æŸ
  maxDepth: number;             // é»˜è®¤ 5ï¼Œæœ€å¤§æ ‘æ·±åº¦
  maxChildrenPerNode: number;   // é»˜è®¤ 10ï¼Œå•èŠ‚ç‚¹æœ€å¤§å­ä»»åŠ¡æ•°

  // ä»£ç é‡ä¼°ç®—ï¼ˆè¡Œæ•°ï¼‰
  estimatedLinesPerTask: number;  // é»˜è®¤ 100ï¼Œæ¯ä¸ªä»»åŠ¡é¢„è®¡ä»£ç è¡Œæ•°
  maxLinesPerTask: number;        // é»˜è®¤ 300ï¼Œæœ€å¤§ä»£ç è¡Œæ•°
}
```

### 2. å¤æ‚åº¦è¯„åˆ† (ComplexityScore)

ä½¿ç”¨åŠ æƒå¤šå› å­æ¨¡å‹è¯„ä¼°ä»»åŠ¡å¤æ‚åº¦ï¼š

| å› å­ | æƒé‡ | è¯´æ˜ |
|------|------|------|
| **ä»£ç é‡** | 30% | ä¼°ç®—çš„ä»£ç è¡Œæ•° |
| **ä¾èµ–** | 20% | ä»»åŠ¡å’Œæ¨¡å—çš„ä¾èµ–æ•°é‡ |
| **æ¥å£** | 15% | æ¨¡å—å¯¹å¤–æ¥å£æ•°é‡ |
| **æµ‹è¯•** | 15% | éªŒæ”¶æµ‹è¯•æ•°é‡ |
| **æè¿°** | 10% | ä»»åŠ¡æè¿°é•¿åº¦ |
| **å­ä»»åŠ¡** | 10% | å­ä»»åŠ¡æ•°é‡ |

**æ€»åˆ†è®¡ç®—å…¬å¼**ï¼š
```
æ€»åˆ† = Î£ (å› å­åˆ†æ•° Ã— æƒé‡)
```

### 3. æ‹†åˆ†ç­–ç•¥

å½“ä»»åŠ¡å¤æ‚åº¦è¿‡é«˜æ—¶ï¼Œæä¾›ä»¥ä¸‹æ‹†åˆ†ç­–ç•¥ï¼š

#### æŒ‰åŠŸèƒ½ç‚¹æ‹†åˆ† (by-function)
é€‚ç”¨äºåŒ…å«å¤šä¸ªç‹¬ç«‹åŠŸèƒ½çš„ä»»åŠ¡
```
å®ç°ç”¨æˆ·ç®¡ç†å’Œæƒé™ç³»ç»Ÿ
  â†“ æ‹†åˆ†ä¸º
- å®ç°ç”¨æˆ·ç®¡ç†åŠŸèƒ½
- å®ç°æƒé™ç³»ç»ŸåŠŸèƒ½
```

#### æŒ‰å±‚æ¬¡æ‹†åˆ† (by-layer)
é€‚ç”¨äºå…¨æ ˆä»»åŠ¡
```
å®ç°è®¢å•åŠŸèƒ½
  â†“ æ‹†åˆ†ä¸º
- è®¢å• UI ç»„ä»¶
- è®¢å•ä¸šåŠ¡é€»è¾‘
- è®¢å•æ•°æ®è®¿é—®
```

#### æŒ‰ä¾èµ–æ‹†åˆ† (by-dependency)
é€‚ç”¨äºä¾èµ–å¤æ‚çš„ä»»åŠ¡
```
å®ç°æ”¯ä»˜é›†æˆ
  â†“ æ‹†åˆ†ä¸º
- æ”¯ä»˜ä¾èµ–é›†æˆï¼ˆç¬¬ä¸‰æ–¹ SDKï¼‰
- æ”¯ä»˜æ ¸å¿ƒå®ç°ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
```

#### æŒ‰æ¥å£æ‹†åˆ† (by-interface)
é€‚ç”¨äºå¤šæ¥å£æ¨¡å—
```
å®ç° API æœåŠ¡
  â†“ æ‹†åˆ†ä¸º
- REST API å®ç°
- GraphQL API å®ç°
- WebSocket å®ç°
```

### 4. åˆå¹¶ç­–ç•¥

å½“ä»»åŠ¡å¤æ‚åº¦è¿‡ä½æ—¶ï¼Œæä¾›ä»¥ä¸‹åˆå¹¶ç­–ç•¥ï¼š

#### ç›¸å…³åŠŸèƒ½åˆå¹¶ (related-functions)
```
- æ·»åŠ æŒ‰é’®æ ·å¼
- æ·»åŠ è¾“å…¥æ¡†æ ·å¼    } åˆå¹¶ä¸ºï¼šå®ç°è¡¨å•ç»„ä»¶æ ·å¼
- æ·»åŠ è¡¨å•æ ·å¼
```

#### ç®€å•ä»»åŠ¡æ‰¹é‡å¤„ç† (simple-batch)
```
- ä¿®å¤æ‹¼å†™é”™è¯¯
- æ·»åŠ ä»£ç æ³¨é‡Š     } åˆå¹¶ä¸ºï¼šä»£ç è´¨é‡æ”¹è¿›
- æ ¼å¼åŒ–ä»£ç 
```

#### åŒä¸€æ–‡ä»¶çš„ä¿®æ”¹åˆå¹¶ (same-file)
```
- æ›´æ–° UserService.ts çš„ç™»å½•æ–¹æ³•
- æ›´æ–° UserService.ts çš„æ³¨å†Œæ–¹æ³•  } åˆå¹¶ä¸ºï¼šå®Œå–„ UserService
- æ›´æ–° UserService.ts çš„æ³¨é”€æ–¹æ³•
```

## ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ä½¿ç”¨

```typescript
import { createTaskGranularityController } from './task-granularity.js';
import type { TaskNode, TaskTree } from './types.js';

// 1. åˆ›å»ºæ§åˆ¶å™¨
const controller = createTaskGranularityController();

// 2. è¯„ä¼°å•ä¸ªä»»åŠ¡å¤æ‚åº¦
const task: TaskNode = { /* ... */ };
const score = controller.assessComplexity(task);
console.log(`ä»»åŠ¡å¤æ‚åº¦: ${score.total}/100`);

// 3. æ£€æŸ¥æ˜¯å¦éœ€è¦æ‹†åˆ†
const splitCheck = controller.shouldSplit(task);
if (splitCheck.shouldSplit) {
  console.log(`éœ€è¦æ‹†åˆ†: ${splitCheck.reason}`);
}

// 4. æ£€æŸ¥å…„å¼Ÿä»»åŠ¡æ˜¯å¦éœ€è¦åˆå¹¶
const siblings: TaskNode[] = [ /* ... */ ];
const mergeCheck = controller.shouldMerge(siblings);
if (mergeCheck.shouldMerge) {
  console.log(`éœ€è¦åˆå¹¶: ${mergeCheck.reason}`);
}

// 5. è‡ªåŠ¨è°ƒæ•´æ•´ä¸ªä»»åŠ¡æ ‘
const tree: TaskTree = { /* ... */ };
const result = controller.autoAdjust(tree);
console.log(controller.printAdjustmentReport(result));
```

### è‡ªå®šä¹‰é…ç½®

```typescript
// åˆ›å»ºæ›´ä¸¥æ ¼çš„ç²’åº¦æ§åˆ¶ï¼ˆé€‚åˆå¤§å‹é¡¹ç›®ï¼‰
const strictController = createTaskGranularityController({
  minTaskComplexity: 20,    // æé«˜æœ€å°å¤æ‚åº¦
  maxTaskComplexity: 60,    // é™ä½æœ€å¤§å¤æ‚åº¦
  idealTaskDuration: 20,    // ç¼©çŸ­ç†æƒ³æ—¶é—´åˆ° 20 åˆ†é’Ÿ
  maxTaskDuration: 60,      // æœ€å¤§ 1 å°æ—¶
  maxDepth: 6,              // å…è®¸æ›´æ·±çš„æ ‘
  maxChildrenPerNode: 5,    // å‡å°‘å•èŠ‚ç‚¹å­ä»»åŠ¡æ•°
});

// åˆ›å»ºæ›´å®½æ¾çš„ç²’åº¦æ§åˆ¶ï¼ˆé€‚åˆå°å‹é¡¹ç›®ï¼‰
const relaxedController = createTaskGranularityController({
  minTaskComplexity: 10,
  maxTaskComplexity: 85,
  idealTaskDuration: 45,
  maxTaskDuration: 180,
  maxDepth: 4,
  maxChildrenPerNode: 15,
});
```

### é›†æˆåˆ°ä»»åŠ¡æ ‘ç®¡ç†å™¨

```typescript
import { taskTreeManager } from './task-tree-manager.js';
import { defaultGranularityController } from './task-granularity.js';

// åœ¨ç”Ÿæˆä»»åŠ¡æ ‘åè‡ªåŠ¨æ£€æŸ¥ç²’åº¦
const tree = taskTreeManager.generateFromBlueprint(blueprint);
const adjustmentResult = defaultGranularityController.autoAdjust(tree, blueprint.modules);

if (adjustmentResult.needsAdjustment) {
  console.log('âš ï¸  ä»»åŠ¡æ ‘éœ€è¦è°ƒæ•´ç²’åº¦');
  console.log(defaultGranularityController.printAdjustmentReport(adjustmentResult));

  // æ ¹æ®å»ºè®®è°ƒæ•´ä»»åŠ¡æ ‘
  for (const split of adjustmentResult.splitSuggestions) {
    // å®ç°æ‹†åˆ†é€»è¾‘
  }

  for (const merge of adjustmentResult.mergeSuggestions) {
    // å®ç°åˆå¹¶é€»è¾‘
  }
}
```

## è°ƒæ•´ç»“æœ (AdjustmentResult)

è‡ªåŠ¨è°ƒæ•´ä¼šè¿”å›è¯¦ç»†çš„åˆ†ææŠ¥å‘Šï¼š

```typescript
interface AdjustmentResult {
  needsAdjustment: boolean;           // æ˜¯å¦éœ€è¦è°ƒæ•´

  splitSuggestions: SplitSuggestion[];   // æ‹†åˆ†å»ºè®®
  mergeSuggestions: MergeSuggestion[];   // åˆå¹¶å»ºè®®

  stats: {
    totalTasks: number;
    tooSimple: number;                // å¤ªç®€å•çš„ä»»åŠ¡æ•°
    tooComplex: number;               // å¤ªå¤æ‚çš„ä»»åŠ¡æ•°
    justRight: number;                // ç²’åº¦åˆšå¥½çš„ä»»åŠ¡æ•°
    avgComplexity: number;            // å¹³å‡å¤æ‚åº¦
    avgDepth: number;                 // å¹³å‡æ·±åº¦
    maxDepth: number;                 // æœ€å¤§æ·±åº¦
    avgChildren: number;              // å¹³å‡å­ä»»åŠ¡æ•°
    maxChildren: number;              // æœ€å¤§å­ä»»åŠ¡æ•°
  };

  issues: Array<{                     // æ£€æµ‹åˆ°çš„é—®é¢˜
    type: 'too-deep' | 'too-shallow' | 'too-many-children' | 'unbalanced';
    description: string;
    severity: 'high' | 'medium' | 'low';
  }>;
}
```

## å¤æ‚åº¦è¯„ä¼°ç¤ºä¾‹

### ç®€å•ä»»åŠ¡ï¼ˆ15 åˆ†ä»¥ä¸‹ï¼‰
```
ä»»åŠ¡: æ·»åŠ æŒ‰é’®æ ·å¼
ä¼°ç®—è¡Œæ•°: 20
ä¼°ç®—æ—¶é—´: 10 åˆ†é’Ÿ
å¤æ‚åº¦: 12/100
  - ä»£ç é‡: 8/100
  - ä¾èµ–: 0/100
  - æ¥å£: 0/100
  - æµ‹è¯•: 0/100
  - æè¿°: 10/100
  - å­ä»»åŠ¡: 0/100
å»ºè®®: ä¸ç›¸å…³ä»»åŠ¡åˆå¹¶
```

### é€‚ä¸­ä»»åŠ¡ï¼ˆ15-75 åˆ†ï¼‰
```
ä»»åŠ¡: å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½
ä¼°ç®—è¡Œæ•°: 150
ä¼°ç®—æ—¶é—´: 45 åˆ†é’Ÿ
å¤æ‚åº¦: 48/100
  - ä»£ç é‡: 52/100
  - ä¾èµ–: 40/100
  - æ¥å£: 35/100
  - æµ‹è¯•: 50/100
  - æè¿°: 45/100
  - å­ä»»åŠ¡: 30/100
å»ºè®®: ç²’åº¦åˆé€‚
```

### å¤æ‚ä»»åŠ¡ï¼ˆ75 åˆ†ä»¥ä¸Šï¼‰
```
ä»»åŠ¡: å®ç°å®Œæ•´çš„ç”µå•†ç³»ç»Ÿ
ä¼°ç®—è¡Œæ•°: 800+
ä¼°ç®—æ—¶é—´: 240+ åˆ†é’Ÿ
å¤æ‚åº¦: 92/100
  - ä»£ç é‡: 95/100
  - ä¾èµ–: 90/100
  - æ¥å£: 85/100
  - æµ‹è¯•: 95/100
  - æè¿°: 90/100
  - å­ä»»åŠ¡: 80/100
å»ºè®®: éœ€è¦æ‹†åˆ†ä¸ºå¤šä¸ªå­ä»»åŠ¡
```

## æœ€ä½³å®è·µ

### 1. å®šæœŸæ£€æŸ¥ç²’åº¦

åœ¨ä»¥ä¸‹æ—¶æœºæ£€æŸ¥ä»»åŠ¡ç²’åº¦ï¼š
- âœ… è“å›¾ç”Ÿæˆä»»åŠ¡æ ‘å
- âœ… Agent åŠ¨æ€æ·»åŠ å­ä»»åŠ¡å
- âœ… æ¯æ—¥æ„å»ºæ—¶
- âœ… é¡¹ç›®é‡Œç¨‹ç¢‘å‰

### 2. å¹³è¡¡ç²’åº¦å’Œçµæ´»æ€§

```typescript
// âŒ ä¸æ¨èï¼šè¿‡äºä¸¥æ ¼
{
  minTaskComplexity: 30,
  maxTaskComplexity: 50,  // èŒƒå›´å¤ªçª„ï¼Œçµæ´»æ€§ä¸å¤Ÿ
}

// âœ… æ¨èï¼šé€‚åº¦èŒƒå›´
{
  minTaskComplexity: 15,
  maxTaskComplexity: 75,  // ç»™äºˆè¶³å¤Ÿçš„çµæ´»ç©ºé—´
}
```

### 3. æ ¹æ®é¡¹ç›®ç±»å‹è°ƒæ•´

```typescript
// å¤§å‹é¡¹ç›®ï¼šæ›´ç»†çš„ç²’åº¦
const largeProjectConfig = {
  maxTaskComplexity: 60,
  idealTaskDuration: 20,
  maxDepth: 6,
};

// å°å‹é¡¹ç›®ï¼šæ›´ç²—çš„ç²’åº¦
const smallProjectConfig = {
  maxTaskComplexity: 80,
  idealTaskDuration: 45,
  maxDepth: 4,
};

// å¿«é€ŸåŸå‹ï¼šå®½æ¾ç²’åº¦
const prototypeConfig = {
  maxTaskComplexity: 90,
  idealTaskDuration: 60,
  maxDepth: 3,
};
```

### 4. äººå·¥å®¡æ ¸å»ºè®®

```typescript
const result = controller.autoAdjust(tree);

if (result.needsAdjustment) {
  // ğŸ”´ é«˜ä¼˜å…ˆçº§é—®é¢˜ - å¿…é¡»å¤„ç†
  const highIssues = result.issues.filter(i => i.severity === 'high');

  // ğŸŸ¡ ä¸­ç­‰é—®é¢˜ - å»ºè®®å¤„ç†
  const mediumIssues = result.issues.filter(i => i.severity === 'medium');

  // ğŸŸ¢ ä½ä¼˜å…ˆçº§ - å¯é€‰
  const lowIssues = result.issues.filter(i => i.severity === 'low');

  // äººå·¥å®¡æ ¸æ‹†åˆ†/åˆå¹¶å»ºè®®
  for (const split of result.splitSuggestions) {
    const userConfirmed = await askUser(`æ˜¯å¦æ‹†åˆ†ä»»åŠ¡ "${split.taskName}"?`);
    if (userConfirmed) {
      // æ‰§è¡Œæ‹†åˆ†
    }
  }
}
```

## æŠ€æœ¯ç»†èŠ‚

### å¤æ‚åº¦å› å­è®¡ç®—

#### ä»£ç é‡å› å­
ä½¿ç”¨ Sigmoid å‡½æ•°å¹³æ»‘æ˜ å°„ï¼š
```
f(x) = 1 / (1 + e^(-2(x/100 - 1)))

x=50  â†’ 0.27  (ç®€å•)
x=100 â†’ 0.50  (ä¸­ç­‰)
x=200 â†’ 0.88  (å¤æ‚)
x=300 â†’ 0.98  (å¾ˆå¤æ‚)
```

#### æ—¶é—´ä¼°ç®—
```
åŸºç¡€æ—¶é—´ = ä»£ç è¡Œæ•° / 10  (æ¯ 10 è¡Œ 1 åˆ†é’Ÿ)
è°ƒæ•´å = åŸºç¡€æ—¶é—´ Ã— (1 + ä¾èµ–å› å­Ã—0.5) Ã— (1 + æ¥å£å› å­Ã—0.3) Ã— (1 + æµ‹è¯•å› å­Ã—0.4)
```

### ç›¸ä¼¼åº¦æ£€æµ‹

ä½¿ç”¨å¤šç§æ–¹æ³•åˆ¤æ–­ä»»åŠ¡ç›¸å…³æ€§ï¼š
1. **æ¨¡å—ç›¸åŒ**ï¼šblueprintModuleId ä¸€è‡´
2. **å…³é”®è¯åŒ¹é…**ï¼šè‡³å°‘ 2 ä¸ªå…±åŒå…³é”®è¯
3. **æè¿°ç›¸ä¼¼**ï¼šå…±åŒè¯è¯­æ¯”ä¾‹ > 30%

## è¿è¡Œç¤ºä¾‹

```bash
# è¿è¡Œæ‰€æœ‰ç¤ºä¾‹
npx tsx src/blueprint/task-granularity.example.ts

# æˆ–ä½¿ç”¨ Node.js
npm run build
node dist/blueprint/task-granularity.example.js
```

## è¾“å‡ºç¤ºä¾‹

```
ä»»åŠ¡ç²’åº¦åˆ†ææŠ¥å‘Š
============================================================

ç»Ÿè®¡ä¿¡æ¯:
  æ€»ä»»åŠ¡æ•°: 45
  - å¤ªç®€å•: 12 (26.7%)
  - å¤ªå¤æ‚: 5 (11.1%)
  - åˆšåˆšå¥½: 28 (62.2%)
  å¹³å‡å¤æ‚åº¦: 42.3/100
  å¹³å‡æ·±åº¦: 2.8
  æœ€å¤§æ·±åº¦: 4
  å¹³å‡å­ä»»åŠ¡æ•°: 3.2
  æœ€å¤§å­ä»»åŠ¡æ•°: 8

âš ï¸  å‘ç°çš„é—®é¢˜:
  ğŸŸ¡ [too-many-children] æŸäº›èŠ‚ç‚¹å­ä»»åŠ¡è¿‡å¤šï¼ˆæœ€å¤š 8 > 5ï¼‰
  ğŸŸ¡ [unbalanced] ä»»åŠ¡æ ‘ä¸å¹³è¡¡ï¼ŒæŸäº›åˆ†æ”¯è¿‡æ·±æˆ–è¿‡æµ…

ğŸ“Š æ‹†åˆ†å»ºè®® (5 ä¸ª):
  - å®ç°å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
    åŸå› : ä»»åŠ¡å¤æ‚åº¦è¿‡é«˜ï¼ˆ82.5 > 75.0ï¼‰
    å¤æ‚åº¦: 82.5
    å»ºè®®æ‹†åˆ†ä¸º 4 ä¸ªå­ä»»åŠ¡:
      * ç”¨æˆ·ç®¡ç† - UIç»„ä»¶ [by-layer]
      * ç”¨æˆ·ç®¡ç† - ä¸šåŠ¡é€»è¾‘ [by-layer]
      * ç”¨æˆ·ç®¡ç† - APIæ¥å£ [by-layer]
      * ç”¨æˆ·ç®¡ç† - æ•°æ®è®¿é—® [by-layer]

ğŸ”— åˆå¹¶å»ºè®® (3 ä¸ª):
  - åˆå¹¶ 3 ä¸ªä»»åŠ¡:
    * æ·»åŠ æŒ‰é’®æ ·å¼
    * æ·»åŠ è¾“å…¥æ¡†æ ·å¼
    * æ·»åŠ è¡¨å•æ ·å¼
    åŸå› : ç›¸å…³ä»»åŠ¡å¤æ‚åº¦éƒ½å¾ˆä½ï¼ˆå¹³å‡ 11.2 < 22.5ï¼‰
    å»ºè®®æ–°åç§°: æ‰¹é‡ä»»åŠ¡ï¼šæ·»åŠ  æ ·å¼
    ç­–ç•¥: related-functions

============================================================
ç»“è®º: âš ï¸  éœ€è¦è°ƒæ•´ä»»åŠ¡ç²’åº¦
```

## API å‚è€ƒ

è¯¦ç»† API æ–‡æ¡£è¯·å‚è€ƒ TypeScript ç±»å‹å®šä¹‰ï¼š
- `src/blueprint/task-granularity.ts` - æ ¸å¿ƒå®ç°
- `src/blueprint/types.ts` - ç±»å‹å®šä¹‰

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæˆ‘çš„æ‰€æœ‰ä»»åŠ¡éƒ½è¢«æ ‡è®°ä¸º"å¤ªç®€å•"ï¼Ÿ
A: å¯èƒ½æ˜¯é…ç½®çš„ `minTaskComplexity` é˜ˆå€¼è¿‡é«˜ï¼Œæˆ–è€…ä»»åŠ¡æè¿°è¿‡äºç®€ç•¥ã€‚å°è¯•é™ä½é˜ˆå€¼æˆ–ä¸°å¯Œä»»åŠ¡æè¿°ã€‚

### Q: å¦‚ä½•å¤„ç†è‡ªåŠ¨ç”Ÿæˆçš„å»ºè®®ï¼Ÿ
A: å»ºè®®ä¸ä¼šè‡ªåŠ¨åº”ç”¨ï¼Œéœ€è¦äººå·¥å®¡æ ¸åæ‰‹åŠ¨æ‰§è¡Œæ‹†åˆ†/åˆå¹¶æ“ä½œã€‚è¿™ç¡®ä¿äº†ç³»ç»Ÿçš„å¯æ§æ€§ã€‚

### Q: å¤æ‚åº¦è¯„åˆ†çš„æƒé‡å¯ä»¥è‡ªå®šä¹‰å—ï¼Ÿ
A: å½“å‰æƒé‡æ˜¯ç¡¬ç¼–ç çš„ï¼ˆä»£ç é‡30%ã€ä¾èµ–20%ç­‰ï¼‰ï¼Œæœªæ¥ç‰ˆæœ¬ä¼šæ”¯æŒè‡ªå®šä¹‰æƒé‡ã€‚

### Q: èƒ½å¦å¿½ç•¥æŸäº›ä»»åŠ¡çš„ç²’åº¦æ£€æŸ¥ï¼Ÿ
A: å¯ä»¥åœ¨ä»»åŠ¡çš„ metadata ä¸­æ·»åŠ  `skipGranularityCheck: true` æ ‡è®°ï¼ˆéœ€è¦åœ¨ä»£ç ä¸­å®ç°æ­¤é€»è¾‘ï¼‰ã€‚

## æœªæ¥æ”¹è¿›

- [ ] æ”¯æŒè‡ªå®šä¹‰å¤æ‚åº¦å› å­æƒé‡
- [ ] æœºå™¨å­¦ä¹ ä¼˜åŒ–æ—¶é—´ä¼°ç®—æ¨¡å‹
- [ ] åŸºäºå†å²æ•°æ®çš„ç²’åº¦æ¨è
- [ ] è‡ªåŠ¨åº”ç”¨æ‹†åˆ†/åˆå¹¶å»ºè®®
- [ ] é›†æˆåˆ°èœ‚ç¾¤æ§åˆ¶å° UI
- [ ] æ”¯æŒç²’åº¦å˜æ›´å†å²è¿½è¸ª

## ç›¸å…³æ–‡ä»¶

- `src/blueprint/task-granularity.ts` - æ ¸å¿ƒå®ç°
- `src/blueprint/task-granularity.example.ts` - ä½¿ç”¨ç¤ºä¾‹
- `src/blueprint/task-tree-manager.ts` - ä»»åŠ¡æ ‘ç®¡ç†å™¨
- `src/blueprint/types.ts` - ç±»å‹å®šä¹‰
