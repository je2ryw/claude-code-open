{
  "id": "95153ea4-aa71-42da-8736-4305c33930e9",
  "name": "claude-code-open",
  "description": "claude-code-open 是一个基于 React 框架的TypeScript 项目。包含 32 个主要模块：src/agents、src/background、src/blueprint、src/chrome-mcp、src/commands、src/config、src/context、src/core、src/env、src/git、src/hooks、src/map、src/mcp、src/media、src/memory、src/models、src/network、src/parser、src/permissions、src/plugins、src/prompt、src/sandbox、src/security、src/session、src/streaming、src/teleport、src/tools、src/types、src/ui、src/utils、src/web/client、src/web/server。",
  "version": "1.0.0",
  "status": "approved",
  "projectPath": "F:\\claude-code-open",
  "businessProcesses": [
    {
      "id": "95ae546f-e732-4f31-97d9-acea5e6d97aa",
      "name": "用户发起对话流程",
      "description": "用户通过 CLI 或 Web UI 发送消息，系统处理并返回 AI 响应",
      "type": "to-be",
      "steps": [
        {
          "id": "",
          "order": 1,
          "name": "用户在 UI（CLI 或 Web）输入消息",
          "description": "用户在 UI（CLI 或 Web）输入消息",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 2,
          "name": "commands 模块解析命令和参数",
          "description": "commands 模块解析命令和参数",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 3,
          "name": "permissions 模块检查所需权限",
          "description": "permissions 模块检查所需权限",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 4,
          "name": "context 模块构建对话上下文",
          "description": "context 模块构建对话上下文",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 5,
          "name": "memory 模块加载相关历史记忆",
          "description": "memory 模块加载相关历史记忆",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 6,
          "name": "core 模块调用 Claude API",
          "description": "core 模块调用 Claude API",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 7,
          "name": "streaming 模块处理流式响应",
          "description": "streaming 模块处理流式响应",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 8,
          "name": "UI 模块实时显示响应",
          "description": "UI 模块实时显示响应",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 9,
          "name": "memory 模块保存对话历史",
          "description": "memory 模块保存对话历史",
          "actor": "系统"
        }
      ],
      "actors": [
        "系统",
        "用户"
      ],
      "inputs": [],
      "outputs": []
    },
    {
      "id": "f0c7d0a5-832f-4215-aa69-c4e7264d05f3",
      "name": "工具调用流程",
      "description": "AI 在对话中调用工具执行特定任务",
      "type": "to-be",
      "steps": [
        {
          "id": "",
          "order": 1,
          "name": "Claude API 返回工具调用请求",
          "description": "Claude API 返回工具调用请求",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 2,
          "name": "tools 模块解析工具名称和参数",
          "description": "tools 模块解析工具名称和参数",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 3,
          "name": "permissions 模块验证工具调用权限",
          "description": "permissions 模块验证工具调用权限",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 4,
          "name": "如需授权，通过 UI 请求用户确认",
          "description": "如需授权，通过 UI 请求用户确认",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 5,
          "name": "sandbox 模块创建隔离执行环境",
          "description": "sandbox 模块创建隔离执行环境",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 6,
          "name": "工具在沙箱中执行并返回结果",
          "description": "工具在沙箱中执行并返回结果",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 7,
          "name": "结果发送回 Claude API 继续对话",
          "description": "结果发送回 Claude API 继续对话",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 8,
          "name": "清理沙箱资源",
          "description": "清理沙箱资源",
          "actor": "系统"
        }
      ],
      "actors": [
        "系统",
        "用户"
      ],
      "inputs": [],
      "outputs": []
    },
    {
      "id": "0d85cfe4-23c5-42d3-9621-d68c0b55047a",
      "name": "项目蓝图生成流程",
      "description": "扫描项目结构，生成语义蓝图文档",
      "type": "to-be",
      "steps": [
        {
          "id": "",
          "order": 1,
          "name": "用户执行 blueprint 生成命令",
          "description": "用户执行 blueprint 生成命令",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 2,
          "name": "map 模块扫描项目文件结构",
          "description": "map 模块扫描项目文件结构",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 3,
          "name": "parser 模块解析源代码文件",
          "description": "parser 模块解析源代码文件",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 4,
          "name": "blueprint 模块提取代码符号和依赖",
          "description": "blueprint 模块提取代码符号和依赖",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 5,
          "name": "分析模块类型和职责",
          "description": "分析模块类型和职责",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 6,
          "name": "生成蓝图 JSON 文档",
          "description": "生成蓝图 JSON 文档",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 7,
          "name": "保存到 .blueprint 目录",
          "description": "保存到 .blueprint 目录",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 8,
          "name": "可选：向 AI 发送蓝图以获取分析",
          "description": "可选：向 AI 发送蓝图以获取分析",
          "actor": "系统"
        }
      ],
      "actors": [
        "系统",
        "用户"
      ],
      "inputs": [],
      "outputs": []
    },
    {
      "id": "3e350dcc-65d2-4bb2-9701-53b660bb389b",
      "name": "MCP 工具集成流程",
      "description": "通过 MCP 协议集成外部工具服务器",
      "type": "to-be",
      "steps": [
        {
          "id": "",
          "order": 1,
          "name": "配置 MCP 服务器连接信息",
          "description": "配置 MCP 服务器连接信息",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 2,
          "name": "mcp 模块启动 MCP 客户端",
          "description": "mcp 模块启动 MCP 客户端",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 3,
          "name": "连接到 MCP 服务器（如 Chrome MCP）",
          "description": "连接到 MCP 服务器（如 Chrome MCP）",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 4,
          "name": "获取服务器提供的工具列表",
          "description": "获取服务器提供的工具列表",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 5,
          "name": "将 MCP 工具注册到 tools 模块",
          "description": "将 MCP 工具注册到 tools 模块",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 6,
          "name": "AI 调用 MCP 工具时通过协议转发",
          "description": "AI 调用 MCP 工具时通过协议转发",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 7,
          "name": "接收工具执行结果并返回",
          "description": "接收工具执行结果并返回",
          "actor": "系统"
        }
      ],
      "actors": [
        "系统",
        "用户"
      ],
      "inputs": [],
      "outputs": []
    },
    {
      "id": "5a7238f8-87cc-44b0-94a3-fc9ccf1859d0",
      "name": "多代理协作流程",
      "description": "使用多个 AI 代理协作完成复杂任务",
      "type": "to-be",
      "steps": [
        {
          "id": "",
          "order": 1,
          "name": "用户提交复杂任务",
          "description": "用户提交复杂任务",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 2,
          "name": "agents 模块的 AgentCoordinator 分析任务",
          "description": "agents 模块的 AgentCoordinator 分析任务",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 3,
          "name": "创建多个 Worker 代理",
          "description": "创建多个 Worker 代理",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 4,
          "name": "分配子任务到各个代理（task:assigned 事件）",
          "description": "分配子任务到各个代理（task:assigned 事件）",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 5,
          "name": "代理并行或串行执行任务",
          "description": "代理并行或串行执行任务",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 6,
          "name": "监听 execution:completed 事件",
          "description": "监听 execution:completed 事件",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 7,
          "name": "汇总各代理结果",
          "description": "汇总各代理结果",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 8,
          "name": "返回最终结果给用户",
          "description": "返回最终结果给用户",
          "actor": "系统"
        }
      ],
      "actors": [
        "系统",
        "用户"
      ],
      "inputs": [],
      "outputs": []
    },
    {
      "id": "3b7a265a-7386-4060-8466-518215204e50",
      "name": "Web UI 实时交互流程",
      "description": "用户通过 Web 界面与 AI 实时对话",
      "type": "to-be",
      "steps": [
        {
          "id": "",
          "order": 1,
          "name": "用户访问 Web UI",
          "description": "用户访问 Web UI",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 2,
          "name": "web/server 提供静态页面",
          "description": "web/server 提供静态页面",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 3,
          "name": "web/client 建立 WebSocket 连接",
          "description": "web/client 建立 WebSocket 连接",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 4,
          "name": "用户发送消息通过 WebSocket",
          "description": "用户发送消息通过 WebSocket",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 5,
          "name": "server 验证请求并调用 core 模块",
          "description": "server 验证请求并调用 core 模块",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 6,
          "name": "通过 WebSocket 流式推送响应块",
          "description": "通过 WebSocket 流式推送响应块",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 7,
          "name": "client 实时渲染响应内容",
          "description": "client 实时渲染响应内容",
          "actor": "系统"
        },
        {
          "id": "",
          "order": 8,
          "name": "支持代码高亮、文件上传等交互",
          "description": "支持代码高亮、文件上传等交互",
          "actor": "系统"
        }
      ],
      "actors": [
        "系统",
        "用户"
      ],
      "inputs": [],
      "outputs": []
    }
  ],
  "modules": [
    {
      "id": "526444b2-3547-4921-a471-04b7526fc3d8",
      "name": "src/agents",
      "description": "智能代理协调和任务分配系统",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "管理多个 AI 代理的创建和生命周期",
        "任务分配和执行协调",
        "代理间通信和状态同步",
        "工作流编排"
      ],
      "dependencies": [
        "9223a1ea-630d-47a9-a7fb-acd7b621c347",
        "5f0e719f-2dae-4b7f-b401-4c1048874e2d"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/agents"
    },
    {
      "id": "c7210ca1-09dd-4788-896f-333a8fb7ba1e",
      "name": "src/background",
      "description": "src/background 模块 - service",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数"
      ],
      "dependencies": [
        "07ba75b6-2489-43a4-bf3c-1b7d43d2962d"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/background"
    },
    {
      "id": "3a0ef1ab-11fd-4d49-9433-f3a83f908ad0",
      "name": "src/blueprint",
      "description": "项目蓝图生成和代码语义分析",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "扫描项目结构生成蓝图",
        "提取代码符号和依赖关系",
        "语义分析和模块识别",
        "生成项目文档和架构图"
      ],
      "dependencies": [
        "4fe8d353-77d4-423b-8382-422d90aeeae8",
        "2c454bf3-6508-4e5f-a511-1381b247a444"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/blueprint"
    },
    {
      "id": "fbaec3be-2c25-48f7-8ec1-8ecf16ce3fcc",
      "name": "src/chrome-mcp",
      "description": "Model Context Protocol 实现和服务器管理",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "实现 MCP 协议规范",
        "管理 MCP 服务器连接",
        "处理工具和资源注册",
        "协调 MCP 客户端和服务端通信"
      ],
      "dependencies": [],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/chrome-mcp"
    },
    {
      "id": "af16b6ea-2d87-4e42-bcd7-55dc00ca6871",
      "name": "src/commands",
      "description": "CLI 命令定义和处理",
      "type": "backend",
      "responsibilities": [
        "业务逻辑处理",
        "API 接口提供",
        "认证授权",
        "定义可用命令",
        "解析命令行参数",
        "执行命令逻辑",
        "输出命令结果"
      ],
      "dependencies": [
        "1b8da626-fe5c-4e82-8509-05c11bd8efee",
        "eb4bb4fb-5675-4c77-a279-e93bd9b5fd02",
        "b759d6d3-9210-4497-8c7f-6b11bfd67ee2",
        "e392adfa-3e97-4f1c-9c80-b583552cfd16",
        "07ba75b6-2489-43a4-bf3c-1b7d43d2962d"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React",
        "Express"
      ],
      "rootPath": "src/commands"
    },
    {
      "id": "1b8da626-fe5c-4e82-8509-05c11bd8efee",
      "name": "src/config",
      "description": "配置管理和环境变量处理",
      "type": "infrastructure",
      "responsibilities": [
        "配置管理",
        "部署脚本",
        "加载和保存配置",
        "管理环境变量",
        "验证配置有效性",
        "提供配置访问接口"
      ],
      "dependencies": [
        "9223a1ea-630d-47a9-a7fb-acd7b621c347",
        "4a57b40c-d110-4288-ad2d-ae9b3d50f566"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/config"
    },
    {
      "id": "b759d6d3-9210-4497-8c7f-6b11bfd67ee2",
      "name": "src/context",
      "description": "上下文管理和智能裁剪",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "管理对话上下文窗口",
        "智能裁剪历史消息",
        "上下文大小估算",
        "优先级排序"
      ],
      "dependencies": [
        "9223a1ea-630d-47a9-a7fb-acd7b621c347"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/context"
    },
    {
      "id": "4fe8d353-77d4-423b-8382-422d90aeeae8",
      "name": "src/core",
      "description": "核心 AI 交互和 API 调用层",
      "type": "backend",
      "responsibilities": [
        "业务逻辑处理",
        "API 接口提供",
        "封装 Anthropic Claude API 调用",
        "管理会话和消息流",
        "处理流式响应",
        "错误处理和重试逻辑"
      ],
      "dependencies": [
        "07ba75b6-2489-43a4-bf3c-1b7d43d2962d",
        "9223a1ea-630d-47a9-a7fb-acd7b621c347",
        "d67a951e-ab05-467f-9f3a-9462960501fc",
        "5f0e719f-2dae-4b7f-b401-4c1048874e2d",
        "0a37ae2a-3206-4088-8cfd-dd422f1347be",
        "2abfd2ee-c4ed-40f3-99f6-95eeb6a25b89",
        "1b8da626-fe5c-4e82-8509-05c11bd8efee",
        "16ca5515-1ac5-402c-be01-dd30d8a15d03"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React",
        "Express"
      ],
      "rootPath": "src/core"
    },
    {
      "id": "4a57b40c-d110-4288-ad2d-ae9b3d50f566",
      "name": "src/env",
      "description": "src/env 模块 - service",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数"
      ],
      "dependencies": [],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/env"
    },
    {
      "id": "16ca5515-1ac5-402c-be01-dd30d8a15d03",
      "name": "src/git",
      "description": "Git 版本控制集成",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "执行 Git 命令",
        "获取仓库状态",
        "提交和推送更改",
        "分支管理"
      ],
      "dependencies": [
        "07ba75b6-2489-43a4-bf3c-1b7d43d2962d"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/git"
    },
    {
      "id": "2abfd2ee-c4ed-40f3-99f6-95eeb6a25b89",
      "name": "src/hooks",
      "description": "src/hooks 模块 - service",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数"
      ],
      "dependencies": [
        "3a0ef1ab-11fd-4d49-9433-f3a83f908ad0"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/hooks"
    },
    {
      "id": "eb4bb4fb-5675-4c77-a279-e93bd9b5fd02",
      "name": "src/map",
      "description": "项目文件映射和索引",
      "type": "backend",
      "responsibilities": [
        "业务逻辑处理",
        "API 接口提供",
        "构建项目文件索引",
        "快速文件查找",
        "依赖关系图构建",
        "文件变更检测"
      ],
      "dependencies": [
        "4fe8d353-77d4-423b-8382-422d90aeeae8"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React",
        "Express"
      ],
      "rootPath": "src/map"
    },
    {
      "id": "3a7e3e57-8ffe-49ff-9416-117967c00575",
      "name": "src/mcp",
      "description": "Model Context Protocol 实现和服务器管理",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "实现 MCP 协议规范",
        "管理 MCP 服务器连接",
        "处理工具和资源注册",
        "协调 MCP 客户端和服务端通信"
      ],
      "dependencies": [
        "9223a1ea-630d-47a9-a7fb-acd7b621c347",
        "5f0e719f-2dae-4b7f-b401-4c1048874e2d",
        "4fe8d353-77d4-423b-8382-422d90aeeae8"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/mcp"
    },
    {
      "id": "c074babc-4b2b-48cd-a380-45b6a27d3c03",
      "name": "src/media",
      "description": "多媒体文件处理",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "处理图片上传和转换",
        "文件类型检测",
        "图片压缩和优化",
        "多模态内容编码"
      ],
      "dependencies": [],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/media"
    },
    {
      "id": "be12691b-3844-4faa-baa2-37d60ded1d89",
      "name": "src/memory",
      "description": "对话历史和上下文记忆管理",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "持久化对话历史",
        "管理会话向量存储",
        "实现语义搜索和相关记忆检索",
        "优化上下文窗口使用"
      ],
      "dependencies": [
        "07ba75b6-2489-43a4-bf3c-1b7d43d2962d"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/memory"
    },
    {
      "id": "0a37ae2a-3206-4088-8cfd-dd422f1347be",
      "name": "src/models",
      "description": "数据模型和持久化",
      "type": "database",
      "responsibilities": [
        "数据持久化",
        "数据模型定义",
        "数据库迁移",
        "定义数据模型",
        "数据库操作抽象",
        "数据验证",
        "模型关系管理"
      ],
      "dependencies": [],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/models"
    },
    {
      "id": "d67a951e-ab05-467f-9f3a-9462960501fc",
      "name": "src/network",
      "description": "网络请求和代理管理",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "HTTP/HTTPS 请求封装",
        "代理服务器配置",
        "请求重试和超时",
        "网络错误处理"
      ],
      "dependencies": [
        "4fe8d353-77d4-423b-8382-422d90aeeae8"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/network"
    },
    {
      "id": "2c454bf3-6508-4e5f-a511-1381b247a444",
      "name": "src/parser",
      "description": "代码解析和语法分析",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "解析不同语言的代码",
        "提取代码结构和符号",
        "生成抽象语法树（AST）",
        "支持多语言"
      ],
      "dependencies": [],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/parser"
    },
    {
      "id": "2d0e1cc3-4731-4683-bee2-1db812002d2b",
      "name": "src/permissions",
      "description": "权限控制和安全策略管理",
      "type": "frontend",
      "responsibilities": [
        "用户界面渲染",
        "用户交互处理",
        "管理工具和操作权限",
        "验证用户授权",
        "持久化权限配置",
        "提供权限 UI 界面"
      ],
      "dependencies": [
        "9223a1ea-630d-47a9-a7fb-acd7b621c347"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React",
        "React"
      ],
      "rootPath": "src/permissions"
    },
    {
      "id": "26fd42db-7579-4ed4-bede-f7e41f87623b",
      "name": "src/plugins",
      "description": "src/plugins 模块 - service",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数"
      ],
      "dependencies": [
        "07ba75b6-2489-43a4-bf3c-1b7d43d2962d",
        "9223a1ea-630d-47a9-a7fb-acd7b621c347"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/plugins"
    },
    {
      "id": "f76691d2-b9fd-434f-b465-f12380e06c24",
      "name": "src/prompt",
      "description": "src/prompt 模块 - service",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数"
      ],
      "dependencies": [
        "3a0ef1ab-11fd-4d49-9433-f3a83f908ad0",
        "9223a1ea-630d-47a9-a7fb-acd7b621c347"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/prompt"
    },
    {
      "id": "c1e92bdc-ca90-4d5f-b6ad-8fa35977b6f6",
      "name": "src/sandbox",
      "description": "沙箱环境和安全代码执行",
      "type": "infrastructure",
      "responsibilities": [
        "配置管理",
        "部署脚本",
        "创建隔离的执行环境",
        "限制资源访问",
        "监控代码执行",
        "防止恶意代码执行"
      ],
      "dependencies": [
        "07ba75b6-2489-43a4-bf3c-1b7d43d2962d"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/sandbox"
    },
    {
      "id": "54281756-e338-4c1c-9c8a-17c41b438dcd",
      "name": "src/security",
      "description": "安全策略和加密服务",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "提供加密和解密服务",
        "输入验证和清理",
        "防止注入攻击",
        "安全随机数生成"
      ],
      "dependencies": [
        "1b8da626-fe5c-4e82-8509-05c11bd8efee"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/security"
    },
    {
      "id": "bcc0ee8e-4313-4602-82b4-41bb461dacde",
      "name": "src/session",
      "description": "src/session 模块 - service",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数"
      ],
      "dependencies": [
        "9223a1ea-630d-47a9-a7fb-acd7b621c347",
        "1b8da626-fe5c-4e82-8509-05c11bd8efee",
        "b759d6d3-9210-4497-8c7f-6b11bfd67ee2"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/session"
    },
    {
      "id": "2695a3a7-b017-4a91-b38b-b5245acf6394",
      "name": "src/streaming",
      "description": "流式数据处理和事件流管理",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "处理服务器发送事件（SSE）",
        "管理流式响应",
        "实现背压控制",
        "处理流错误和重连"
      ],
      "dependencies": [],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/streaming"
    },
    {
      "id": "95d93ba8-99de-4003-a873-6fc432249f92",
      "name": "src/teleport",
      "description": "src/teleport 模块 - service",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数"
      ],
      "dependencies": [
        "3a7e3e57-8ffe-49ff-9416-117967c00575"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/teleport"
    },
    {
      "id": "5f0e719f-2dae-4b7f-b401-4c1048874e2d",
      "name": "src/tools",
      "description": "工具系统和函数调用管理",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数",
        "注册和管理可用工具",
        "执行工具调用",
        "参数验证和类型转换",
        "工具执行结果处理"
      ],
      "dependencies": [
        "9223a1ea-630d-47a9-a7fb-acd7b621c347",
        "07ba75b6-2489-43a4-bf3c-1b7d43d2962d",
        "4fe8d353-77d4-423b-8382-422d90aeeae8",
        "f76691d2-b9fd-434f-b465-f12380e06c24",
        "2abfd2ee-c4ed-40f3-99f6-95eeb6a25b89",
        "1b8da626-fe5c-4e82-8509-05c11bd8efee",
        "3a0ef1ab-11fd-4d49-9433-f3a83f908ad0"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/tools"
    },
    {
      "id": "9223a1ea-630d-47a9-a7fb-acd7b621c347",
      "name": "src/types",
      "description": "TypeScript 类型定义和接口",
      "type": "infrastructure",
      "responsibilities": [
        "配置管理",
        "部署脚本",
        "定义核心数据结构",
        "提供类型安全",
        "接口定义",
        "类型工具函数"
      ],
      "dependencies": [],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/types"
    },
    {
      "id": "e392adfa-3e97-4f1c-9c80-b583552cfd16",
      "name": "src/ui",
      "description": "CLI 用户界面组件（基于 Ink）",
      "type": "frontend",
      "responsibilities": [
        "用户界面渲染",
        "用户交互处理",
        "渲染命令行界面",
        "处理用户交互",
        "显示进度和状态",
        "格式化输出"
      ],
      "dependencies": [
        "4fe8d353-77d4-423b-8382-422d90aeeae8",
        "af16b6ea-2d87-4e42-bcd7-55dc00ca6871",
        "5f0e719f-2dae-4b7f-b401-4c1048874e2d",
        "1b8da626-fe5c-4e82-8509-05c11bd8efee",
        "0a37ae2a-3206-4088-8cfd-dd422f1347be",
        "9223a1ea-630d-47a9-a7fb-acd7b621c347",
        "07ba75b6-2489-43a4-bf3c-1b7d43d2962d"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React",
        "React"
      ],
      "rootPath": "src/ui"
    },
    {
      "id": "07ba75b6-2489-43a4-bf3c-1b7d43d2962d",
      "name": "src/utils",
      "description": "src/utils 模块 - service",
      "type": "service",
      "responsibilities": [
        "通用服务提供",
        "工具函数"
      ],
      "dependencies": [
        "1b8da626-fe5c-4e82-8509-05c11bd8efee",
        "9223a1ea-630d-47a9-a7fb-acd7b621c347"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React"
      ],
      "rootPath": "src/utils"
    },
    {
      "id": "4d30a453-b09d-4bf9-a3e4-22af7d1d8e07",
      "name": "src/web/client",
      "description": "Web 前端用户界面",
      "type": "frontend",
      "responsibilities": [
        "用户界面渲染",
        "用户交互处理",
        "提供 Web UI 交互界面",
        "处理用户输入和显示响应",
        "管理前端状态",
        "与后端 API 通信"
      ],
      "dependencies": [],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React",
        "React"
      ],
      "rootPath": "src/web/client"
    },
    {
      "id": "1290c0f9-51f2-4184-881d-2f2b35d86797",
      "name": "src/web/server",
      "description": "Web 后端服务器和 API 路由",
      "type": "backend",
      "responsibilities": [
        "业务逻辑处理",
        "API 接口提供",
        "认证授权",
        "提供 HTTP API 端点",
        "处理 WebSocket 连接",
        "代理 Claude API 请求",
        "静态文件服务"
      ],
      "dependencies": [
        "4fe8d353-77d4-423b-8382-422d90aeeae8",
        "1b8da626-fe5c-4e82-8509-05c11bd8efee",
        "0a37ae2a-3206-4088-8cfd-dd422f1347be",
        "5f0e719f-2dae-4b7f-b401-4c1048874e2d",
        "f76691d2-b9fd-434f-b465-f12380e06c24",
        "9223a1ea-630d-47a9-a7fb-acd7b621c347",
        "bcc0ee8e-4313-4602-82b4-41bb461dacde",
        "3a7e3e57-8ffe-49ff-9416-117967c00575",
        "be12691b-3844-4faa-baa2-37d60ded1d89",
        "07ba75b6-2489-43a4-bf3c-1b7d43d2962d",
        "3a0ef1ab-11fd-4d49-9433-f3a83f908ad0",
        "eb4bb4fb-5675-4c77-a279-e93bd9b5fd02"
      ],
      "interfaces": [],
      "techStack": [
        "TypeScript",
        "React",
        "Express"
      ],
      "rootPath": "src/web/server"
    }
  ],
  "nfrs": [
    {
      "id": "5fe71b2b-7752-4dbf-a56b-966abc72d601",
      "category": "maintainability",
      "name": "代码可维护性",
      "description": "保持代码清晰、有文档、有测试",
      "priority": "must"
    }
  ],
  "createdAt": "2026-01-24T12:32:12.213Z",
  "updatedAt": "2026-01-24T12:32:12.913Z",
  "changeHistory": [
    {
      "id": "7d2fc820-b6a5-4c53-b0df-6da43b39d809",
      "timestamp": "2026-01-24T12:32:12.213Z",
      "type": "create",
      "description": "蓝图创建：claude-code-open",
      "author": "agent"
    },
    {
      "id": "b4718dfa-7940-4c78-a01c-c4fea14a34af",
      "timestamp": "2026-01-24T12:32:12.217Z",
      "type": "update",
      "description": "添加系统模块：src/agents",
      "author": "agent"
    },
    {
      "id": "48058b83-a841-433c-a60e-806fa1ffb28d",
      "timestamp": "2026-01-24T12:32:12.235Z",
      "type": "update",
      "description": "添加系统模块：src/background",
      "author": "agent"
    },
    {
      "id": "49d35053-c455-49d5-8d04-4ba59d8e1092",
      "timestamp": "2026-01-24T12:32:12.249Z",
      "type": "update",
      "description": "添加系统模块：src/blueprint",
      "author": "agent"
    },
    {
      "id": "cfbbe58a-6708-4133-98f4-6f6653c4dd80",
      "timestamp": "2026-01-24T12:32:12.263Z",
      "type": "update",
      "description": "添加系统模块：src/chrome-mcp",
      "author": "agent"
    },
    {
      "id": "b2edc5ea-21c4-4f9c-9ab0-1aa0934f89ea",
      "timestamp": "2026-01-24T12:32:12.275Z",
      "type": "update",
      "description": "添加系统模块：src/commands",
      "author": "agent"
    },
    {
      "id": "dfd588d8-2348-4dd4-8f9b-dfcd016617b6",
      "timestamp": "2026-01-24T12:32:12.291Z",
      "type": "update",
      "description": "添加系统模块：src/config",
      "author": "agent"
    },
    {
      "id": "bfad6c3f-fb72-4ebd-a20d-aef6c09410cf",
      "timestamp": "2026-01-24T12:32:12.292Z",
      "type": "update",
      "description": "添加系统模块：src/context",
      "author": "agent"
    },
    {
      "id": "7ec389b0-3684-4e21-b762-7d7a9787ab64",
      "timestamp": "2026-01-24T12:32:12.307Z",
      "type": "update",
      "description": "添加系统模块：src/core",
      "author": "agent"
    },
    {
      "id": "a02f4077-46c9-467a-89fd-5a9aaaf7349a",
      "timestamp": "2026-01-24T12:32:12.321Z",
      "type": "update",
      "description": "添加系统模块：src/env",
      "author": "agent"
    },
    {
      "id": "8cd0c597-6a38-4ec2-b5b3-69d96db49a87",
      "timestamp": "2026-01-24T12:32:12.333Z",
      "type": "update",
      "description": "添加系统模块：src/git",
      "author": "agent"
    },
    {
      "id": "3a6e61f2-123a-4d11-94e3-540d57101021",
      "timestamp": "2026-01-24T12:32:12.342Z",
      "type": "update",
      "description": "添加系统模块：src/hooks",
      "author": "agent"
    },
    {
      "id": "9cf79beb-8e1e-4c53-a585-ab86aa99a9a0",
      "timestamp": "2026-01-24T12:32:12.350Z",
      "type": "update",
      "description": "添加系统模块：src/map",
      "author": "agent"
    },
    {
      "id": "8aeeefdb-e833-4dc3-a672-6617634d8c96",
      "timestamp": "2026-01-24T12:32:12.350Z",
      "type": "update",
      "description": "添加系统模块：src/mcp",
      "author": "agent"
    },
    {
      "id": "f85745cb-790a-44ef-8844-e598703753ab",
      "timestamp": "2026-01-24T12:32:12.352Z",
      "type": "update",
      "description": "添加系统模块：src/media",
      "author": "agent"
    },
    {
      "id": "2bb6e4aa-718e-40b0-97b8-8aea8f6be286",
      "timestamp": "2026-01-24T12:32:12.360Z",
      "type": "update",
      "description": "添加系统模块：src/memory",
      "author": "agent"
    },
    {
      "id": "574ddc75-5ae1-4e8f-9110-d9da5cf2f173",
      "timestamp": "2026-01-24T12:32:12.382Z",
      "type": "update",
      "description": "添加系统模块：src/models",
      "author": "agent"
    },
    {
      "id": "8fde0581-79ec-40ba-a651-1923593c766e",
      "timestamp": "2026-01-24T12:32:12.408Z",
      "type": "update",
      "description": "添加系统模块：src/network",
      "author": "agent"
    },
    {
      "id": "04d27d22-a33b-4a38-b33a-78d5770837c7",
      "timestamp": "2026-01-24T12:32:12.435Z",
      "type": "update",
      "description": "添加系统模块：src/parser",
      "author": "agent"
    },
    {
      "id": "2bdfcc68-fff9-47b0-a962-06f15729f850",
      "timestamp": "2026-01-24T12:32:12.463Z",
      "type": "update",
      "description": "添加系统模块：src/permissions",
      "author": "agent"
    },
    {
      "id": "1dd56782-c8a9-4007-a0ae-97a2d44fcf6a",
      "timestamp": "2026-01-24T12:32:12.491Z",
      "type": "update",
      "description": "添加系统模块：src/plugins",
      "author": "agent"
    },
    {
      "id": "65fb9a0c-baa3-4950-900e-90d996eccd6a",
      "timestamp": "2026-01-24T12:32:12.522Z",
      "type": "update",
      "description": "添加系统模块：src/prompt",
      "author": "agent"
    },
    {
      "id": "7d350111-ba7c-43d2-ace2-08e9350d2597",
      "timestamp": "2026-01-24T12:32:12.549Z",
      "type": "update",
      "description": "添加系统模块：src/sandbox",
      "author": "agent"
    },
    {
      "id": "ddb343a2-4af5-42be-a448-c7dc36e683f4",
      "timestamp": "2026-01-24T12:32:12.550Z",
      "type": "update",
      "description": "添加系统模块：src/security",
      "author": "agent"
    },
    {
      "id": "fec63a36-925a-4870-9ce3-418bf1407f8b",
      "timestamp": "2026-01-24T12:32:12.581Z",
      "type": "update",
      "description": "添加系统模块：src/session",
      "author": "agent"
    },
    {
      "id": "8655006c-c5f6-41e4-beb9-20b3ef8658ef",
      "timestamp": "2026-01-24T12:32:12.611Z",
      "type": "update",
      "description": "添加系统模块：src/streaming",
      "author": "agent"
    },
    {
      "id": "ff683c2b-f16e-4a43-a645-154ce87137af",
      "timestamp": "2026-01-24T12:32:12.638Z",
      "type": "update",
      "description": "添加系统模块：src/teleport",
      "author": "agent"
    },
    {
      "id": "5bec3fb6-2c7b-44c9-8377-976daf6aa6e3",
      "timestamp": "2026-01-24T12:32:12.667Z",
      "type": "update",
      "description": "添加系统模块：src/tools",
      "author": "agent"
    },
    {
      "id": "718f8c78-8fd8-40bf-b49e-f334dd8b9784",
      "timestamp": "2026-01-24T12:32:12.669Z",
      "type": "update",
      "description": "添加系统模块：src/types",
      "author": "agent"
    },
    {
      "id": "df050dd5-3a59-47c9-b905-d0df41797547",
      "timestamp": "2026-01-24T12:32:12.699Z",
      "type": "update",
      "description": "添加系统模块：src/ui",
      "author": "agent"
    },
    {
      "id": "c6fb85d3-b821-43cf-81f2-74aed5efdeee",
      "timestamp": "2026-01-24T12:32:12.724Z",
      "type": "update",
      "description": "添加系统模块：src/utils",
      "author": "agent"
    },
    {
      "id": "a690446f-a8be-45da-8cb4-a4bc163730a6",
      "timestamp": "2026-01-24T12:32:12.748Z",
      "type": "update",
      "description": "添加系统模块：src/web/client",
      "author": "agent"
    },
    {
      "id": "1030eb47-cd2e-4ec0-8514-b1bc587eb0ce",
      "timestamp": "2026-01-24T12:32:12.750Z",
      "type": "update",
      "description": "添加系统模块：src/web/server",
      "author": "agent"
    },
    {
      "id": "7c65908f-8539-433b-b2e2-d6e45052b474",
      "timestamp": "2026-01-24T12:32:12.811Z",
      "type": "update",
      "description": "添加业务流程：用户发起对话流程",
      "author": "agent"
    },
    {
      "id": "6eefbd67-9750-4778-a4c8-bca0f4b06066",
      "timestamp": "2026-01-24T12:32:12.813Z",
      "type": "update",
      "description": "添加业务流程：工具调用流程",
      "author": "agent"
    },
    {
      "id": "c835b900-2a03-4ca0-9738-c637c3dc1126",
      "timestamp": "2026-01-24T12:32:12.834Z",
      "type": "update",
      "description": "添加业务流程：项目蓝图生成流程",
      "author": "agent"
    },
    {
      "id": "e8fa53ae-c35c-4b11-b49d-1c13d40ed93b",
      "timestamp": "2026-01-24T12:32:12.847Z",
      "type": "update",
      "description": "添加业务流程：MCP 工具集成流程",
      "author": "agent"
    },
    {
      "id": "caace7c2-cc2f-4ca7-81db-e513f9de3692",
      "timestamp": "2026-01-24T12:32:12.865Z",
      "type": "update",
      "description": "添加业务流程：多代理协作流程",
      "author": "agent"
    },
    {
      "id": "fa8daee0-ae05-41b3-88f8-d1112eb214b3",
      "timestamp": "2026-01-24T12:32:12.887Z",
      "type": "update",
      "description": "添加业务流程：Web UI 实时交互流程",
      "author": "agent"
    },
    {
      "id": "f7f02482-ae99-4aaa-8482-4e46b34374ce",
      "timestamp": "2026-01-24T12:32:12.913Z",
      "type": "update",
      "description": "添加非功能性要求：代码可维护性",
      "author": "agent"
    }
  ],
  "approvedAt": "2026-01-24T12:32:12.938Z",
  "approvedBy": "system",
  "source": "codebase"
}