{
    "sourceFile": "README.zh-CN.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1767498242184,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1767581591630,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n # Claude Code (Open Source)\r\n \r\n-基于 `@anthropic-ai/claude-code` v2.0.76 的开源实现。\r\n+基于 `@anthropic-ai/claude-code` v2.0.76 的开源实现。它将成为未来 AI 的基础设施，运行在每台 PC 上。\r\n \r\n+\r\n **仅用于教育和研究目的。**\r\n \r\n ## 免责声明\r\n \r\n"
                },
                {
                    "date": 1767581670432,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n # Claude Code (Open Source)\r\n \r\n 基于 `@anthropic-ai/claude-code` v2.0.76 的开源实现。它将成为未来 AI 的基础设施，运行在每台 PC 上。\r\n+未来的AI 编程流程，更像一个软件项目实施开发过程，\r\n \r\n-\r\n **仅用于教育和研究目的。**\r\n \r\n ## 免责声明\r\n \r\n"
                },
                {
                    "date": 1767586474957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n # Claude Code (Open Source)\r\n \r\n 基于 `@anthropic-ai/claude-code` v2.0.76 的开源实现。它将成为未来 AI 的基础设施，运行在每台 PC 上。\r\n-未来的AI 编程流程，更像一个软件项目实施开发过程，\r\n+未来的AI 编程流程，更像一个软件项目实施开发过程，要用标准的项目开发流程构建软件\r\n \r\n **仅用于教育和研究目的。**\r\n \r\n ## 免责声明\r\n"
                }
            ],
            "date": 1767498242184,
            "name": "Commit-0",
            "content": "# Claude Code (Open Source)\r\n\r\n基于 `@anthropic-ai/claude-code` v2.0.76 的开源实现。\r\n\r\n**仅用于教育和研究目的。**\r\n\r\n## 免责声明\r\n\r\n这是一个教育项目，用于研究和学习 CLI 工具的架构设计。这**不是**官方 Claude Code 的源代码，而是基于公开 API 和类型定义的重新实现。\r\n\r\n如需使用官方 Claude Code，请安装官方版本：\r\n```bash\r\nnpm install -g @anthropic-ai/claude-code\r\n```\r\n\r\n## 安装\r\n\r\n```bash\r\n# 安装依赖\r\nnpm install\r\n\r\n# 构建项目\r\nnpm run build\r\n\r\n# 全局链接（可选）\r\nnpm link\r\n```\r\n\r\n## 使用\r\n\r\n```bash\r\n# 交互模式\r\nnpm run dev\r\n\r\n# 或构建后运行\r\nnode dist/cli.js\r\n\r\n# 带初始 prompt\r\nnode dist/cli.js \"你好，请帮我分析这个项目\"\r\n\r\n# 打印模式\r\nnode dist/cli.js -p \"解释这段代码\"\r\n\r\n# 指定模型\r\nnode dist/cli.js -m opus \"复杂任务\"\r\n\r\n# 恢复上一次会话\r\nnode dist/cli.js --resume\r\n```\r\n\r\n## 配置\r\n\r\n设置 API 密钥：\r\n\r\n**Linux/macOS:**\r\n```bash\r\nexport ANTHROPIC_API_KEY=your-api-key\r\n# 或\r\nexport CLAUDE_API_KEY=your-api-key\r\n```\r\n\r\n**Windows 命令提示符:**\r\n```cmd\r\nset ANTHROPIC_API_KEY=your-api-key\r\n# 或\r\nset CLAUDE_API_KEY=your-api-key\r\n```\r\n\r\n**Windows PowerShell:**\r\n```powershell\r\n$env:ANTHROPIC_API_KEY=\"your-api-key\"\r\n# 或\r\n$env:CLAUDE_API_KEY=\"your-api-key\"\r\n```\r\n\r\n### 环境变量\r\n\r\n| 变量                            | 说明              | 默认值 |\r\n| ------------------------------- | ----------------- | ------ |\r\n| `ANTHROPIC_API_KEY`             | API 密钥          | -      |\r\n| `BASH_MAX_OUTPUT_LENGTH`        | Bash 输出最大长度 | 30000  |\r\n| `CLAUDE_CODE_MAX_OUTPUT_TOKENS` | 最大输出 tokens   | 32000  |\r\n| `CLAUDE_TELEMETRY_ENABLED`      | 启用遥测          | true   |\r\n\r\n## 项目结构\r\n\r\n```\r\nsrc/\r\n├── index.ts                # 主导出文件\r\n├── cli.ts                  # CLI 入口点 (Commander.js)\r\n├── core/                   # 核心引擎\r\n│   ├── client.ts           # Anthropic API 客户端（流式、重试、成本）\r\n│   ├── session.ts          # 会话状态管理\r\n│   ├── loop.ts             # 对话编排器\r\n│   └── context.ts          # 上下文管理和摘要\r\n├── tools/                  # 25+ 工具\r\n│   ├── bash.ts             # Bash 执行（沙箱支持）\r\n│   ├── file.ts             # Read/Write/Edit/MultiEdit\r\n│   ├── search.ts           # Glob/Grep 搜索\r\n│   ├── web.ts              # WebFetch/WebSearch\r\n│   ├── todo.ts             # TodoWrite 任务管理\r\n│   ├── agent.ts            # Task/TaskOutput 子代理\r\n│   ├── notebook.ts         # Jupyter Notebook 编辑\r\n│   ├── planmode.ts         # EnterPlanMode/ExitPlanMode\r\n│   ├── mcp.ts              # MCP 协议（ListMcpResources/ReadMcpResource）\r\n│   ├── ask.ts              # AskUserQuestion\r\n│   ├── tmux.ts             # Tmux 多终端（Linux/macOS）\r\n│   ├── skill.ts            # 技能系统\r\n│   ├── lsp.ts              # LSP 集成（诊断、悬停、引用）\r\n│   └── sandbox.ts          # Bubblewrap 沙箱（Linux）\r\n├── ui/                     # Ink/React UI 框架\r\n│   ├── App.tsx             # 主应用组件\r\n│   └── components/         # 可重用 UI 组件\r\n│       ├── Spinner.tsx\r\n│       ├── Message.tsx\r\n│       ├── ToolCall.tsx\r\n│       ├── TodoList.tsx\r\n│       ├── PermissionPrompt.tsx\r\n│       └── StatusBar.tsx\r\n├── agents/                 # 专用子代理\r\n│   ├── explore.ts          # 代码库探索代理\r\n│   ├── plan.ts             # 实现规划代理\r\n│   └── guide.ts            # Claude Code 文档代理\r\n├── auth/                   # 认证\r\n│   ├── oauth.ts            # OAuth 流程\r\n│   └── api-key.ts          # API 密钥管理\r\n├── session/                # 会话持久化\r\n│   ├── manager.ts          # 会话生命周期\r\n│   ├── storage.ts          # 磁盘持久化（~/.claude/sessions/）\r\n│   └── export.ts           # Markdown 导出\r\n├── context/                # 上下文管理\r\n│   ├── estimator.ts        # Token 估算\r\n│   ├── compressor.ts       # 消息摘要\r\n│   └── budget.ts           # Token 预算追踪\r\n├── parser/                 # 代码解析\r\n│   ├── tree-sitter.ts      # Tree-sitter WASM 集成\r\n│   └── languages/          # 特定语言解析器\r\n├── search/                 # 搜索工具\r\n│   ├── ripgrep.ts          # 内置 ripgrep 二进制\r\n│   └── glob.ts             # 文件模式匹配\r\n├── hooks/                  # Hook 系统\r\n│   ├── registry.ts         # Hook 注册\r\n│   └── executor.ts         # Hook 执行\r\n├── mcp/                    # MCP 协议\r\n│   ├── client.ts           # MCP 客户端\r\n│   ├── server.ts           # MCP 服务器连接\r\n│   └── registry.ts         # MCP 服务器注册表\r\n├── permissions/            # 权限系统\r\n│   ├── manager.ts          # 权限请求\r\n│   └── modes.ts            # 权限模式（accept/bypass/plan）\r\n├── config/                 # 配置\r\n│   ├── loader.ts           # 从 ~/.claude/settings.json 加载\r\n│   └── env.ts              # 环境变量处理\r\n├── telemetry/              # 遥测\r\n│   ├── collector.ts        # 事件收集\r\n│   └── analytics.ts        # 本地分析（不上传）\r\n├── skills/                 # 技能系统\r\n│   ├── loader.ts           # 从 ~/.claude/skills/ 加载\r\n│   └── registry.ts         # 技能注册\r\n├── commands/               # 斜杠命令\r\n│   ├── registry.ts         # 命令注册\r\n│   └── builtin/            # 内置命令（/help、/clear 等）\r\n├── plugins/                # 插件系统\r\n│   ├── manager.ts          # 插件生命周期\r\n│   └── loader.ts           # 插件发现\r\n├── models/                 # 模型配置\r\n│   ├── registry.ts         # 模型定义\r\n│   └── pricing.ts          # Token 定价\r\n├── network/                # 网络工具\r\n│   ├── proxy.ts            # 代理支持\r\n│   └── retry.ts            # 重试逻辑\r\n├── streaming/              # 流式 I/O\r\n│   ├── parser.ts           # JSON 消息流\r\n│   └── writer.ts           # 流写入\r\n├── security/               # 安全功能\r\n│   ├── validator.ts        # 输入验证\r\n│   └── sanitizer.ts        # 输出清理\r\n├── types/                  # TypeScript 定义\r\n│   ├── tools.ts            # 工具类型\r\n│   ├── session.ts          # 会话类型\r\n│   └── config.ts           # 配置类型\r\n└── utils/                  # 工具函数\r\n    ├── fs.ts               # 文件系统助手\r\n    ├── path.ts             # 路径工具\r\n    └── time.ts             # 时间格式化\r\n```\r\n\r\n## 已实现工具（25+）\r\n\r\n| 工具             | 状态     | 说明                                                 |\r\n| ---------------- | -------- | ---------------------------------------------------- |\r\n| **文件操作**     |          |                                                      |\r\n| Read             | ✅ 完成   | 文件读取，支持图像/PDF/Notebook + 外部修改检测       |\r\n| Write            | ✅ 完成   | 文件写入，带覆盖保护                                 |\r\n| Edit             | ✅ 完成   | 文件编辑（字符串替换）                               |\r\n| MultiEdit        | ✅ 完成   | 批量文件编辑（原子操作）                             |\r\n| **搜索与发现**   |          |                                                      |\r\n| Glob             | ✅ 完成   | 文件模式匹配                                         |\r\n| Grep             | ✅ 完成   | 内容搜索（基于 ripgrep），官方输出格式               |\r\n| **执行**         |          |                                                      |\r\n| Bash             | ✅ 完成   | 命令执行，支持后台和沙箱                             |\r\n| TaskOutput       | ✅ 完成   | 获取后台命令/代理输出（统一 UUID/task_id 格式）      |\r\n| KillShell        | ✅ 完成   | 终止后台进程                                         |\r\n| **Web 访问**     |          |                                                      |\r\n| WebFetch         | ✅ 完成   | Web 页面获取，带缓存                                 |\r\n| WebSearch        | ⚠️ 需配置 | Web 搜索（需要 API 配置）                            |\r\n| **任务管理**     |          |                                                      |\r\n| TodoWrite        | ✅ 完成   | 任务管理，带自动提醒系统                             |\r\n| Task             | ✅ 完成   | 子代理（explore、plan、guide 等）                    |\r\n| **规划**         |          |                                                      |\r\n| EnterPlanMode    | ✅ 完成   | 进入规划模式，带权限系统                             |\r\n| ExitPlanMode     | ✅ 完成   | 退出规划模式                                         |\r\n| **交互**         |          |                                                      |\r\n| AskUserQuestion  | ✅ 完成   | 询问用户问题（multiSelect、选项、验证）              |\r\n| **代码工具**     |          |                                                      |\r\n| NotebookEdit     | ✅ 完成   | Jupyter Notebook 单元格编辑（replace/insert/delete） |\r\n| LSP*             | ✅ 完成   | 语言服务器协议集成（诊断、悬停、引用）               |\r\n| **集成**         |          |                                                      |\r\n| ListMcpResources | ✅ 完成   | 列出 MCP 资源                                        |\r\n| ReadMcpResource  | ✅ 完成   | 读取 MCP 资源                                        |\r\n| Skill            | ✅ 完成   | 技能系统，带 args 参数和权限检查                     |\r\n| **终端**         |          |                                                      |\r\n| Tmux             | ✅ 完成   | 多终端会话管理（Linux/macOS）                        |\r\n\r\n*LSP 工具在配置语言服务器后可用\r\n\r\n## 功能特性\r\n\r\n### OAuth 认证\r\n\r\n支持 API 密钥和 OAuth 认证：\r\n\r\n```typescript\r\nimport { initAuth, startOAuthLogin, setApiKey } from './auth';\r\n\r\n// 使用 API 密钥\r\nsetApiKey('your-api-key', true); // true 表示持久化\r\n\r\n// 或使用 OAuth 登录\r\nawait startOAuthLogin({\r\n  clientId: 'your-client-id',\r\n  scope: ['read', 'write'],\r\n});\r\n```\r\n\r\n### 会话持久化与恢复\r\n\r\n自动保存和恢复对话：\r\n\r\n```typescript\r\nimport { SessionManager, listSessions, loadSession } from './session';\r\n\r\nconst manager = new SessionManager({ autoSave: true });\r\n\r\n// 启动新会话或恢复\r\nconst session = manager.start({\r\n  model: 'claude-sonnet-4-20250514',\r\n  resume: true, // 尝试恢复上次会话\r\n});\r\n\r\n// 列出所有会话\r\nconst sessions = listSessions({ limit: 10 });\r\n\r\n// 导出为 Markdown\r\nconst markdown = manager.export();\r\n```\r\n\r\n### 上下文管理\r\n\r\n智能上下文压缩和摘要：\r\n\r\n```typescript\r\nimport { ContextManager, estimateTokens } from './context';\r\n\r\nconst context = new ContextManager({\r\n  maxTokens: 180000,\r\n  summarizeThreshold: 0.7, // 70% 时开始压缩\r\n  keepRecentMessages: 10,\r\n});\r\n\r\n// 添加对话轮次\r\ncontext.addTurn(userMessage, assistantMessage);\r\n\r\n// 获取优化后的消息\r\nconst messages = context.getMessages();\r\n\r\n// 手动压缩\r\ncontext.compact();\r\n```\r\n\r\n### 代码解析器\r\n\r\n多语言代码分析支持：\r\n\r\n```typescript\r\nimport { parseFile, parseCode, detectLanguage } from './parser';\r\n\r\n// 检测语言\r\nconst lang = detectLanguage('app.tsx'); // 'typescript'\r\n\r\n// 解析文件\r\nconst parsed = parseFile('/path/to/file.ts');\r\nconsole.log(parsed.classes);    // 类定义\r\nconsole.log(parsed.functions);  // 函数定义\r\nconsole.log(parsed.imports);    // 导入语句\r\nconsole.log(parsed.exports);    // 导出语句\r\n```\r\n\r\n支持的语言：JavaScript、TypeScript、Python、Go、Rust、Java、C/C++、Ruby、PHP、Swift、Kotlin、Scala 等。\r\n\r\n### 内置 Ripgrep\r\n\r\n内置 ripgrep 支持，无需系统安装：\r\n\r\n```typescript\r\nimport { search, listFiles, getRipgrepVersion } from './search/ripgrep';\r\n\r\n// 搜索内容\r\nconst results = await search({\r\n  pattern: 'function.*async',\r\n  glob: '*.ts',\r\n  ignoreCase: true,\r\n});\r\n\r\n// 列出文件\r\nconst files = await listFiles({\r\n  glob: '**/*.tsx',\r\n  hidden: false,\r\n});\r\n```\r\n\r\n### 遥测与分析\r\n\r\n本地使用统计（数据不上传）：\r\n\r\n```typescript\r\nimport { telemetry, getTelemetryStats } from './telemetry';\r\n\r\n// 记录会话\r\ntelemetry.startSession('claude-sonnet-4-20250514');\r\ntelemetry.recordMessage('user', 100);\r\ntelemetry.recordToolCall('Bash', true, 50);\r\ntelemetry.endSession();\r\n\r\n// 获取统计\r\nconst stats = getTelemetryStats();\r\nconsole.log(stats.totalSessions);\r\nconsole.log(stats.totalTokens);\r\n```\r\n\r\n### Ink/React UI 框架\r\n\r\n完整的终端 UI 组件系统：\r\n- `Spinner` - 加载动画\r\n- `ToolCall` - 工具调用显示\r\n- `Message` - 消息显示\r\n- `Input` - 输入框\r\n- `Header` - 标题栏\r\n- `TodoList` - 任务列表\r\n- `PermissionPrompt` - 权限确认\r\n- `StatusBar` - 状态栏\r\n\r\n### 沙箱支持（Bubblewrap）\r\n\r\n**仅限 Linux：** 如果安装了 `bubblewrap`，Bash 命令将在沙箱中执行以增强安全性：\r\n\r\n```bash\r\n# Ubuntu/Debian\r\nsudo apt install bubblewrap\r\n\r\n# Arch Linux\r\nsudo pacman -S bubblewrap\r\n```\r\n\r\n**Windows/macOS 用户注意：**\r\n- Bubblewrap 沙箱仅在 Linux 上可用\r\n- Windows 和 macOS 用户可以使用 WSL（Windows Subsystem for Linux）来启用沙箱支持\r\n- 或者，命令将在没有沙箱的情况下运行（请谨慎使用）\r\n\r\n可以使用 `dangerouslyDisableSandbox: true` 参数禁用沙箱。\r\n\r\n### Hooks 系统\r\n\r\n在工具调用前后执行自定义脚本：\r\n\r\n```json\r\n// .claude/settings.json\r\n{\r\n  \"hooks\": [\r\n    {\r\n      \"event\": \"PreToolUse\",\r\n      \"matcher\": \"Bash\",\r\n      \"command\": \"/path/to/script.sh\",  // Linux/macOS: .sh, Windows: .bat 或 .ps1\r\n      \"blocking\": true\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n支持的事件：\r\n- `PreToolUse` - 工具调用前\r\n- `PostToolUse` - 工具调用后\r\n- `PrePromptSubmit` - 提交前\r\n- `PostPromptSubmit` - 提交后\r\n- `Notification` - 通知\r\n- `Stop` - 停止\r\n\r\n### MCP 协议支持\r\n\r\n连接到 MCP（Model Context Protocol）服务器：\r\n\r\n```json\r\n// .claude/settings.json\r\n{\r\n  \"mcpServers\": {\r\n    \"filesystem\": {\r\n      \"type\": \"stdio\",\r\n      \"command\": \"npx\",\r\n      \"args\": [\"-y\", \"@modelcontextprotocol/server-filesystem\", \"/path\"]  // 使用绝对路径\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**路径示例：**\r\n- Linux/macOS: `\"/home/user/projects\"` 或 `\"/Users/user/projects\"`\r\n- Windows: `\"C:\\\\Users\\\\user\\\\projects\"`（JSON 中使用双反斜杠）\r\n\r\n### Tmux 多终端\r\n\r\n**仅限 Linux/macOS：** 管理多个终端会话：\r\n```javascript\r\n// 创建会话\r\n{ action: \"new\", session_name: \"dev-server\" }\r\n\r\n// 发送命令\r\n{ action: \"send\", session_name: \"dev-server\", command: \"npm run dev\" }\r\n\r\n// 捕获输出\r\n{ action: \"capture\", session_name: \"dev-server\" }\r\n```\r\n\r\n**Windows 用户注意：**\r\n- Tmux 在 Windows 上原生不可用\r\n- 使用 WSL（Windows Subsystem for Linux）来访问 Tmux\r\n- 替代方案：使用 Windows Terminal 的多标签/窗格功能\r\n\r\n### 技能与自定义命令\r\n\r\n从以下目录加载：\r\n- **Linux/macOS：** `~/.claude/skills/` 和 `.claude/commands/`\r\n- **Windows：** `%USERPROFILE%\\.claude\\skills\\` 和 `.claude\\commands\\`\r\n\r\n功能：\r\n- 技能：可重用的提示模板\r\n- 斜杠命令：自定义命令扩展\r\n\r\n### 增强的 API 客户端\r\n\r\n- 指数退避重试（最多 4 次）\r\n- 自动成本计算\r\n- Token 使用统计\r\n- 多模型定价支持\r\n\r\n## 斜杠命令\r\n\r\n### 通用命令\r\n- `/help` - 显示帮助信息和可用命令\r\n- `/clear` - 清除对话历史，释放上下文\r\n- `/status` - 显示会话状态、模型、API 连接等信息\r\n- `/exit` - 退出 Claude Code\r\n\r\n### 会话管理\r\n- `/resume` - 查看和恢复历史会话\r\n- `/context` - 显示上下文使用情况\r\n- `/compact` - 压缩对话历史，释放上下文空间\r\n- `/rename` - 重命名当前会话\r\n- `/export` - 导出会话为 JSON 或 Markdown 格式\r\n- `/transcript` - 导出会话转录记录（纯文本格式）✨ **新增**\r\n\r\n### 配置管理\r\n- `/config` - 查看当前配置\r\n- `/tools` - 列出可用工具\r\n- `/model` - 查看当前使用的模型\r\n\r\n### 完整命令列表\r\n完整的命令列表和详细说明，请使用 `/help` 命令查看，或参阅 `docs/commands/` 目录下的文档。\r\n\r\n## 测试\r\n\r\n本项目包含全面的测试：\r\n\r\n```bash\r\n# 运行所有测试\r\nnpm test\r\n\r\n# 使用 UI 运行\r\nnpm run test:ui\r\n\r\n# 运行特定测试套件\r\nnpm run test:unit          # 单元测试\r\nnpm run test:integration   # 集成测试\r\nnpm run test:e2e          # 端到端测试\r\n\r\n# 运行覆盖率测试\r\nnpm run test:coverage\r\n\r\n# 监视模式\r\nnpm run test:watch\r\n```\r\n\r\n### 测试结构\r\n- **单元测试**（`src/**/*.test.ts`）- 单个组件测试\r\n- **集成测试**（`tests/integration/`）- 多组件交互测试\r\n- **E2E 测试**（`tests/e2e/`）- 完整 CLI 工作流测试\r\n- **工具测试**（`tests/tools/`）- 单个工具功能测试\r\n\r\n## 最新改进\r\n\r\n### v2.0.76+ 增强功能\r\n- ✅ **工具级错误处理和重试** - 针对瞬态故障的指数退避\r\n- ✅ **LSP URI 处理** - 增强的 URI 解析和位置验证\r\n- ✅ **Grep 输出格式** - 100% 匹配官方实现\r\n- ✅ **OAuth 认证** - 简化的认证流程和系统提示格式化\r\n- ✅ **AskUserQuestion** - 与官方完全一致（multiSelect、验证）\r\n- ✅ **Shell ID 格式** - 所有后台任务统一 UUID/task_id 格式\r\n- ✅ **工具结果持久化** - 自动保存工具执行结果\r\n- ✅ **权限对话流程** - 完整的权限请求工作流\r\n- ✅ **TodoWrite 自动提醒** - 官方任务跟踪提醒系统\r\n- ✅ **规划模式权限** - 权限检查集成到规划工具\r\n- ✅ **文件修改检测** - 文件被外部修改时发出警报\r\n- ✅ **技能 args 参数** - 完整的技能参数传递和权限系统\r\n- ✅ **NotebookEdit 插入模式** - 修复单元格插入位置逻辑\r\n\r\n## 与官方版本对比\r\n\r\n| 组件           | 状态   | 说明                               |\r\n| -------------- | ------ | ---------------------------------- |\r\n| **核心架构**   | ✅ 100% | 三层设计（Entry → Engine → Tools） |\r\n| **CLI 接口**   | ✅ 100% | 所有命令和标志已实现               |\r\n| **工具系统**   | ✅ 100% | 25+ 工具，功能完全一致             |\r\n| **API 客户端** | ✅ 100% | 流式、重试、成本计算               |\r\n| **权限系统**   | ✅ 100% | Accept/bypass/plan 模式            |\r\n| **错误处理**   | ✅ 100% | 工具级指数退避重试                 |\r\n| **文件操作**   | ✅ 100% | 外部修改检测                       |\r\n| **后台任务**   | ✅ 100% | 统一 UUID/task_id 格式             |\r\n| **输出格式**   | ✅ 100% | Grep、LSP 和所有工具匹配官方       |\r\n| **沙箱**       | ✅ 100% | Bubblewrap 隔离（Linux）           |\r\n| **Hooks**      | ✅ 100% | 完整事件系统                       |\r\n| **MCP**        | ✅ 100% | 完整协议支持                       |\r\n| **UI 组件**    | ✅ 100% | Ink/React 框架，带自动滚动         |\r\n| **技能/命令**  | ✅ 100% | Args、权限、发现                   |\r\n| **认证**       | ✅ 100% | API 密钥 + OAuth                   |\r\n| **会话管理**   | ✅ 100% | 持久化、恢复、导出                 |\r\n| **上下文管理** | ✅ 100% | 自动摘要                           |\r\n| **代码解析器** | ✅ 100% | Tree-sitter WASM                   |\r\n| **遥测**       | ✅ 100% | 本地分析                           |\r\n\r\n**总体准确性：~100%**（基于公共 API 和行为分析）\r\n\r\n## 开发\r\n\r\n```bash\r\n# 开发模式（使用 tsx）\r\nnpm run dev\r\n\r\n# 构建\r\nnpm run build\r\n\r\n# 类型检查\r\nnpx tsc --noEmit\r\n```\r\n\r\n## 技术栈\r\n\r\n- **TypeScript** - 类型安全\r\n- **Anthropic SDK** - API 调用\r\n- **Ink + React** - 终端 UI\r\n- **Commander** - CLI 框架\r\n- **Chalk** - 终端颜色\r\n- **Glob** - 文件匹配\r\n- **Zod** - 模式验证\r\n\r\n## 社区\r\n\r\n- **Discord：** [加入我们的 Discord](https://discord.gg/hs5BWGjt)\r\n- **X (Twitter)：** [@wangbingjie1989](https://x.com/wangbingjie1989)\r\n- **微信：** h694623326\r\n\r\n## 许可证\r\n\r\n本项目仅用于教育目的。原始 Claude Code 归 Anthropic PBC 所有。\r\n\r\n---\r\n\r\n*这个项目是对混淆代码的逆向工程研究，不代表官方实现。*\r\n\r\n[English README](README.md)\r\n"
        }
    ]
}